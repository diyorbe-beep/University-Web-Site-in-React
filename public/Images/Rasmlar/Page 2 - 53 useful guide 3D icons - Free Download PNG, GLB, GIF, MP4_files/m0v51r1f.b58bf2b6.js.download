(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{200:function(e,t,r){"use strict";r.d(t,"b",(function(){return T})),r.d(t,"d",(function(){return _})),r.d(t,"a",(function(){return l.c}));var o=r(4),n=r(16),c=r(14),d=r(29),l=r(96),E=d.a.ASSETMANAGER_PATH,O={[l.a.SAVE_RPM_AVATAR]:(e,t)=>Object(o.a)((function*(){try{var{avatarId:e,url:r}=t,content=(yield c.b.post("".concat(E,"/character/rpm"),{avatarId:e,url:r})).data,{fileId:o}=content;return o}catch(e){n.a.error({error:e},"Encounter error saving RPM avatar")}return null}))()},m={[l.b.SET_SHOW_READY_PLAYER_ME_MODAL](e,t){e.showReadyPlayerMeModal=t}},_={setShowReadyPlayerMeModal(e,t){var{commit:r}=e;r("".concat(l.c,"/").concat(l.b.SET_SHOW_READY_PLAYER_ME_MODAL),t,{root:!0})}},T={saveRpmAvatar(e,t,r){var{dispatch:o}=e;return o("".concat(l.c,"/").concat(l.a.SAVE_RPM_AVATAR),{avatarId:t,url:r},{root:!0})}};t.c={namespaced:!0,state:()=>({showReadyPlayerMeModal:!1}),mutations:m,actions:O}},215:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var o=r(4),n=r(8),c={setAppTheme:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.SET_APP_THEME),t,{root:!0})}))(),fetchTopics:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.GET_TOPICS),t,{root:!0})}))(),setLocale:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.SET_APP_LOCALE),t,{root:!0})}))()},d={setRefreshNotice(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_REFRESH_NOTICE),t,{root:!0},{root:!0})},setNetworkStatusModal(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_NETWORK_STATUS_MODAL),t,{root:!0})},setLoadingStatus(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_LOADING_STATUS),t,{root:!0})},setEngineLoadingStatus(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_ENGINE_LOADING_STATUS),t,{root:!0})},setIsWebsocketConnected(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_WEBSOCKET_CONNECTED),t,{root:!0})},setShowAppSuspense(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_SHOW_APP_SUSPENSE),t,{root:!0})},setIsAppWindowActive(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_APP_WINDOW_ACTIVE),t,{root:!0})},setIsReconnectingSocket(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_RECONNECTING_SOCKET),t,{root:!0})},setIsLightMode(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_LIGHT_MODE),t,{root:!0})},setIsMobileView(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_MOBILE_VIEW),t,{root:!0})},setAppNewsBanner(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_APP_NEWS_BANNER),t,{root:!0})},setContextMenu(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_CONTEXT_MENU),t,{root:!0})},setIsFetchingTopics(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_FETCHING_TOPICS),t,{root:!0})},setShowOverlayOnMobileEditor(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_SHOW_OVERLAY_ON_MOBILE_EDITOR),t,{root:!0})},updateTopics(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.UPDATE_TOPICS),t,{root:!0})},setAbTesting(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_AB_TESTING),t,{root:!0})},setAppLocale(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_APP_LOCALE),t,{root:!0})}}},217:function(e){e.exports=JSON.parse('[{"promotionName":"11/11","promotionCode":"11x11Promo30","discount":30,"startDate":"November 06, 2023","expiredDate":"November 13, 2023","eventBannerTitle":"Unlock 30% Pixcap Subscription <br /> Discount Before 11.11","promoBannerTitle":"11.11 Promo","pricingTitle":"11.11 Promo","pricingDescription":"30% discount for 11.11 Sale ðŸš€","type":"DISCOUNT_PROMO"},{"promotionName":"Black Friday","promotionCode":"BlackFriday40","discount":40,"startDate":"November 20, 2023","expiredDate":"November 25, 2023","eventBannerTitle":"Enjoy Black Friday 40% Discount <br /> <span>Only available till <b>Nov 24th</b></span>","promoBannerTitle":"Black Friday","pricingTitle":"Black Friday Special","pricingDescription":"40% Black Friday discount ðŸš€","type":"DISCOUNT_PROMO"},{"promotionName":"February Discount","promotionCode":"14Feb2430","discount":30,"startDate":"February 01, 2024","expiredDate":"February 16,2024","eventBannerTitle":"Enjoy 30% Discount <br /> <span>Only available till <b>February 15</b></span>","promoBannerTitle":"Enjoy February discount on Pixcap PRO and Elite","pricingTitle":"February Promo","pricingDescription":"30% discount for February Sale ðŸš€","planApply":"Annually","type":"DISCOUNT_PROMO"},{"promotionName":"Watermark-free","promoBannerTitle":"Invite friends, enjoy <span class=\'text-weight-600\'>watermark-free</span> on free assets! - <span class=\'text-weight-600\'>forever!</span>","startDate":"April 23, 2024","expiredDate":"May 07, 2024","type":"FREEBIES"},{"promotionCode":"PH824","discount":30,"startDate":"August 21, 2024","expiredDate":"August 27, 2024","type":"CODE_DISCOUNT_PROMO"}]')},351:function(e){e.exports=JSON.parse('[{"id":"3cb7be0e-8af0-4967-a040-1e44c184a82e","UPGRADE_CTA_TEST":"Changing \'Upgrade Plan\' to \'Unlock all features\'"}]')},36:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"d",(function(){return N})),r.d(t,"f",(function(){return F})),r.d(t,"c",(function(){return j})),r.d(t,"b",(function(){return O.a})),r.d(t,"e",(function(){return O.b}));var o=r(9),n=r(4),c=r(72),d=r.n(c),l=r(11),E=r(27),O=r(57),m=r(21),_=r(14),T=r(83),S=r(78),I=r(29),f=r(33),R=r(16),v=r(8);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{AUTH_PATH:P,PAYMENTS_PATH:A,ASSETMANAGER_PATH:D}=I.a,x={[l.a.REFRESH]:e=>Object(n.a)((function*(){try{O.b.setIsRefreshingToken(e,!0);var t=yield _.b.get("".concat(P,"/refresh"));if(t.data){var r={idToken:t.data.idToken,userId:t.data.userId};return O.b.refresh(e,r),E.b.setUserId(e,r.userId),m.b.$mixpanel.identify(r.userId),O.b.store(e,r),!0}}catch(e){throw e}finally{O.b.setIsRefreshingToken(e,!1)}return!1}))(),[l.a.LOGOUT]:(e,t)=>Object(n.a)((function*(){try{O.b.logout(e),E.b.setUserId(e,null),yield d.a.post("".concat(P,"/signOut")),t&&(t.sessionChange?Object(f.$notify)({type:v.f.WARN,title:"Your session has been terminated due to a new login from another location."}):Object(f.$notify)({type:v.f.SUCCESS,title:"You have logged out successfully"})),E.b.updatePersonalData(e,void 0),E.b.setSubscriptionInfo(e,{subscription:null,price:null,paymentStatus:null,currentPeriodEnd:"",isFreeTrialInitiated:!1,pricingCountryCode:null}),E.b.setReferralsInfo(e,{referralCode:null,rewards:[]}),m.b.$services.localStorageManager.remove(T.c),setTimeout((()=>{m.b.$services.serviceWorkerManager&&m.b.$services.serviceWorkerManager.postLogoutMessage()}),500)}finally{delete d.a.defaults.headers.common.Authorization,m.b.$mixpanel.reset(),m.b.$crisp&&m.b.$crisp("logout")}}))(),[l.a.RESEND_EMAIL_VERIFICATION]:(e,t)=>Object(n.a)((function*(){try{yield _.b.get("".concat(P,"/emailVerification/resend/").concat(t))}catch(e){R.a.error("Failed to resend email verification",{err:e})}}))(),[l.a.VERIFY_EMAIL]:(e,t)=>Object(n.a)((function*(){var{email:r,verificationKey:o}=t;try{O.b.updateSubmitStatus(e,!0);var n=yield _.b.get("".concat(P,"/emailVerification/").concat(r),{params:{verificationKey:o}}),{idToken:c,userId:d}=n.data;return m.b.$mixpanel.identify(d),m.b.$mixpanel.track("Login",{"Login Method":"Pixcap"}),m.b.$crisp&&m.b.$crisp("login",d,r),{idToken:c,userId:d}}catch(e){return R.a.error(e),null}finally{O.b.updateSubmitStatus(e,!1)}}))(),[l.a.CHANGE_PASSWORD]:(e,t)=>Object(n.a)((function*(){var{oldPassword:e,newPassword:r}=t;yield _.b.post("".concat(P,"/changePassword"),{oldPassword:e,newPassword:r})}))(),[l.a.STORE]:(e,t)=>Object(n.a)((function*(){O.b.store(e,t)}))(),[l.a.SIGN_IN]:(e,t)=>Object(n.a)((function*(){O.b.updateSubmitStatus(e,!0);var{email:r,password:o}=t;try{var n=yield _.b.post("".concat(P,"/signin"),{email:r,password:o}),{idToken:c,userId:d}=n.data;return m.b.$mixpanel.identify(d),m.b.$mixpanel.track("Login",{"Login Method":"Pixcap"}),O.b.store(e,n.data),m.b.$crisp&&m.b.$crisp("login",d,r),{idToken:c,userId:d}}finally{O.b.updateSubmitStatus(e,!1)}}))(),[l.a.SIGN_UP]:(e,t)=>Object(n.a)((function*(){O.b.updateSubmitStatus(e,!0);try{var r=t.email.toLowerCase(),o=t.password,n=localStorage.getItem(S.c),c=localStorage.getItem(S.d);n&&localStorage.removeItem(S.c);var d=m.b.$services.localStorageManager.read(T.e),l=m.b.$services.localStorageManager.read(T.b),E={password:o,email:r};d&&(E.inviteCode=d),l&&(E.referralCode=l);var{anonymousSession:I}=e.state;I&&I.session&&(E.anonymousUser=I.session);var f=yield _.b.post("".concat(P,"/signUp"),E),{userId:v}=f.data;m.b.$mixpanel.alias(v),m.b.$mixpanel.identify(v),m.b.$mixpanel.people.set({$email:r}),m.b.$mixpanel.track("Sign Up",{Method:l?"Referral Program":"Regular","Referral Code":l||null,"Ref Origin Source":n,"Utm Origin Source":c});try{m.b.$GTM_dataLayer("new_sign_up",r)}catch(e){R.a.error(e)}}finally{O.b.updateSubmitStatus(e,!1)}}))(),[l.a.FORGET_PASSWORD]:(e,t)=>Object(n.a)((function*(){var{email:r,passUrl:o=!0}=t;O.b.updateSubmitStatus(e,!0);try{yield _.b.post("".concat(P,"/forgotPassword"),{email:r,passUrl:o})}finally{O.b.updateSubmitStatus(e,!1)}}))(),[l.a.RESET_PASSWORD]:(e,t)=>Object(n.a)((function*(){var{email:r,confirmationCode:o,password:n}=t;O.b.updateSubmitStatus(e,!0);try{yield _.b.post("".concat(P,"/resetPassword"),{email:r,password:n,confirmationCode:o})}finally{O.b.updateSubmitStatus(e,!1)}}))(),[l.a.SEND_AUTH_CODE]:(e,t)=>Object(n.a)((function*(){var{code:code,provider:r,codeType:o,anonymousUser:n}=t,c=m.b.$services.localStorageManager.read(T.e),d=m.b.$services.localStorageManager.read(T.b),l=y(y(y(y({anonymousUser:n,code:code},d&&{referralCode:d}),c&&{inviteCode:c}),r&&{provider:r}),o&&{codeType:o}),E=yield _.b.post("".concat(P,"/authorize"),l);if(E.data){var{idToken:S,userId:I,email:f,isSocialAuthSignUp:R}=E.data;return O.a.store(e,{idToken:S,userId:I}),{isSocialAuthSignUp:R,userId:I,email:f,idToken:S}}return null}))(),[l.a.VALIDATE_REFERRAL_CODE]:e=>Object(n.a)((function*(){var e=m.b.$services.localStorageManager.read(T.b),t=yield _.b.get("".concat(A,"/referrals/validate?code=").concat(e));return t.data?t.data:null}))(),[l.a.VALIDATE_REFERRAL_EMAIL]:(e,t)=>Object(n.a)((function*(){try{var{email:e}=t,r=yield _.b.put("".concat(A,"/referrals/invite"),{email:e});if(r.data)return r.data}catch(e){return e.data}}))(),[l.a.FETCH_INVITED_REFEREE]:e=>Object(n.a)((function*(){try{var e=yield _.b.get("".concat(A,"/referrals/accepted"));if(e)return e.data}catch(e){R.a.error("Failed to fetch referee list",{e:e})}}))(),[l.a.FETCH_PROMOTIONS]:e=>Object(n.a)((function*(){try{var e=yield _.b.get("".concat(A,"/discounts"));if(e)return e.data}catch(e){R.a.error("Failed to fetch promotion list",{e:e})}}))(),[l.a.SYNC_ANONYMOUS_SESSION_WITH_USER]:e=>Object(n.a)((function*(){try{var t,r=e.state;if(null==(null===(t=r.anonymousSession)||void 0===t?void 0:t.session))return;yield _.b.put("".concat(D,"/project/migrate"),{userId:r.anonymousSession.session}),O.b.setAnonymousSession(e,void 0)}catch(e){R.a.error("Encounter error while syncing anonymous session with user",{e:e})}}))(),[l.a.GRANT_FIGMA_ACCESS]:(e,t)=>Object(n.a)((function*(){try{var{clientId:e,userId:r}=t;return(yield _.b.post("".concat(P,"/grantAccess"),{anonymousUser:r,clientId:e})).data}catch(e){R.a.error("Encounter error while grating access to figma",{e:e})}}))(),[l.a.CHECK_EMAIL_UNIQUENESS]:(e,t)=>Object(n.a)((function*(){O.b.updateSubmitStatus(e,!0);try{return yield _.b.get("".concat(P,"/isEmailUnique/").concat(t)),{isUnique:!0}}catch(e){var r,o=null==e||null===(r=e.data)||void 0===r?void 0:r.errorCode;switch(R.a.error("Encounter error while checking email uniqueness",{e:e}),o){case"E01_01_004":return{isUnique:!1,isPasswordAuth:!0};case"E01_01_007":return{isUnique:!1,isSocialAuth:!0};default:return{isUnique:!1}}return!0}finally{O.b.updateSubmitStatus(e,!1)}}))()},N={[l.d.STORE](e,t){var{idToken:r}=t;e.idToken=r},[l.d.REFRESH](e,t){var{idToken:r}=t;e.idToken=r},[l.d.UPDATE_LOGIN_EMAIL](e,t){e.loginEmail=t},[l.d.UPDATE_RESET_PASSWORD_CODE](e,t){e.resetPasswordCode=t},[l.d.LOGOUT](e){e.idToken=""},[l.d.UPDATE_SUBMIT_STATUS](e,t){e.isSubmitting=t},[l.d.SET_ANONYMOUS_SESSION]:(e,t)=>{e.anonymousSession=t},[l.d.SET_IS_REFRESHING_TOKEN](e,t){e.isRefreshingToken=t}},F=()=>({idToken:"",isSubmitting:!1,anonymousSession:null,loginEmail:"",resetPasswordCode:"",isRefreshingToken:!1}),j={[l.b.IS_AUTHENTICATED]:e=>!!e.idToken}},57:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var o=r(4),n=r(11),c={refresh:e=>Object(o.a)((function*(){var{dispatch:t}=e;return t("".concat(n.e,"/").concat(n.a.REFRESH),void 0,{root:!0})}))(),logout:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.LOGOUT),t,{root:!0})}))(),resendEmailVerification:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.RESEND_EMAIL_VERIFICATION),t,{root:!0})}))(),verifyEmail:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.VERIFY_EMAIL),t,{root:!0})}))(),changePassword:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.CHANGE_PASSWORD),t,{root:!0})}))(),store:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.STORE),t,{root:!0})}))(),signIn:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.SIGN_IN),t,{root:!0})}))(),signUp:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.SIGN_UP),t,{root:!0})}))(),forgetPassword:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.FORGET_PASSWORD),t,{root:!0})}))(),resetPassword:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.RESET_PASSWORD),t,{root:!0})}))(),sendAuthCode:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.SEND_AUTH_CODE),t,{root:!0})}))(),validateReferralCode:e=>Object(o.a)((function*(){var{dispatch:t}=e;return t("".concat(n.e,"/").concat(n.a.VALIDATE_REFERRAL_CODE),{root:!0})}))(),validateReferralEmail:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.VALIDATE_REFERRAL_EMAIL),t,{root:!0})}))(),fetchInvitedReferee:e=>Object(o.a)((function*(){var{dispatch:t}=e;return t("".concat(n.e,"/").concat(n.a.FETCH_INVITED_REFEREE),{root:!0})}))(),fetchPromotions:e=>Object(o.a)((function*(){var{dispatch:t}=e;return t("".concat(n.e,"/").concat(n.a.FETCH_PROMOTIONS),{root:!0})}))(),syncAnonymousSessionWithUser:e=>Object(o.a)((function*(){var{dispatch:t}=e;return t("".concat(n.e,"/").concat(n.a.SYNC_ANONYMOUS_SESSION_WITH_USER),{root:!0})}))(),grantFigmaAccess:(e,t)=>Object(o.a)((function*(){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.GRANT_FIGMA_ACCESS),t,{root:!0})}))(),checkEmailUniqueness(e,t){var{dispatch:r}=e;return r("".concat(n.e,"/").concat(n.a.CHECK_EMAIL_UNIQUENESS),t,{root:!0})}},d={store(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.STORE),t,{root:!0})},refresh(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.REFRESH),t,{root:!0})},logout(e){var{commit:t}=e;t("".concat(n.e,"/").concat(n.d.LOGOUT),void 0,{root:!0})},updateLoginEmail(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.UPDATE_LOGIN_EMAIL),t,{root:!0})},updateResetPasswordCode(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.UPDATE_RESET_PASSWORD_CODE),t,{root:!0})},updateSubmitStatus(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.UPDATE_SUBMIT_STATUS),t,{root:!0})},setAnonymousSession(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_ANONYMOUS_SESSION),t,{root:!0})},setIsRefreshingToken(e,t){var{commit:r}=e;r("".concat(n.e,"/").concat(n.d.SET_IS_REFRESHING_TOKEN),t,{root:!0})}}},58:function(e,t,r){"use strict";r.d(t,"a",(function(){return V})),r.d(t,"d",(function(){return Y})),r.d(t,"f",(function(){return K})),r.d(t,"c",(function(){return J})),r.d(t,"b",(function(){return _})),r.d(t,"e",(function(){return T}));var o,n,c,d=r(4),l=(r(45),r(48),r(55),r(13),r(15),r(37),r(69),r(328),r(205),r(325),r(122),r(68),r(72)),E=r.n(l),O=r(7),m=r(50),_={exportVideo:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_VIDEO),t,{root:!0})}))(),exportGIF:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_GIF),t,{root:!0})}))(),exportVideoOrGIF:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_VIDEO_OR_GIF),t,{root:!0})}))(),exportImage:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_IMAGE),t,{root:!0})}))(),fetchFBXFiles:e=>Object(d.a)((function*(){var{dispatch:t}=e;return t("".concat(O.h,"/").concat(O.a.FETCH_FBX_FILES),void 0,{root:!0})}))(),cancelExportFBX:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.CANCEL_EXPORT_FBX),t,{root:!0})}))(),downloadFBXFile:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.DOWNLOAD_FBX_FILE),t,{root:!0})}))(),subscribeToExportFBXReady:e=>Object(d.a)((function*(){var{dispatch:t}=e;return t("".concat(O.h,"/").concat(O.a.SUBSCRIBE_TO_EXPORT_FBX_READY),void 0,{root:!0})}))(),exportFBX:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_FBX),t,{root:!0})}))(),exportProject:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_PROJECT),t,{root:!0})}))(),checkCanExport3dFile:e=>Object(d.a)((function*(){var{dispatch:t}=e;return t("".concat(O.h,"/").concat(O.a.CHECK_CAN_EXPORT_3D_FILE),void 0,{root:!0})}))(),subscribeToServerRenderProgress:e=>Object(d.a)((function*(){var{dispatch:t}=e;return t("".concat(O.h,"/").concat(O.a.SUBSCRIBE_TO_SERVER_RENDER_PROGRESS),void 0,{root:!0})}))(),serverRender:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.SERVER_RENDER),t,{root:!0})}))(),fetchExportDownloads:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.FETCH_EXPORT_DOWNLOADS),t,{root:!0})}))(),downloadExportDownload:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.DOWNLOAD_EXPORT_DOWNLOAD),t,{root:!0})}))(),downloadAiGeneratedFile:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.DOWNLOAD_AI_GENERATED_FILE),t,{root:!0})}))(),downloadServerRenderFileByRenderId:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.DOWNLOAD_SERVER_RENDER_FILE_BY_RENDER_ID),t,{root:!0})}))(),deleteServerRenderFile:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.DELETE_SERVER_RENDER_FILE),t,{root:!0})}))(),retryServerRenderExport:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.RETRY_SERVER_RENDER_EXPORT),t,{root:!0})}))(),cancelServerRenderExport:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.CANCEL_SERVER_RENDER_EXPORT),t,{root:!0})}))(),exportImageWithTransformation:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_IMAGE_WITH_TRANSFORMATION),t,{root:!0})}))(),exportAIStyledImageWithTransformation:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_AI_STYLED_IMAGE_WITH_TRANSFORMATION),t,{root:!0})}))(),populateImageToMyDownloads:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.POPULATE_IMAGE_TO_MY_DOWNLOADS),t,{root:!0})}))(),publishSceneToCommunity:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.PUBLISH_SCENE_TO_COMMUNITY),t,{root:!0})}))(),publishAISceneToCommunity:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.PUBLISH_AI_SCENE_TO_COMMUNITY),t,{root:!0})}))(),populateDefaultDownloadToMyDownloads:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.POPULATE_DEFAULT_DOWNLOAD_TO_MY_DOWNLOADS),t,{root:!0})}))(),countProjectExport:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.COUNT_PROJECT_EXPORT),t,{root:!0})}))(),pollOngoingServerExportStatus:e=>Object(d.a)((function*(){var{dispatch:t}=e;return t("".concat(O.h,"/").concat(O.a.POLL_ONGOING_SERVER_EXPORT_STATUS),void 0,{root:!0})}))(),removeImageBackground:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.REMOVE_IMAGE_BACKGROUND),t,{root:!0})}))(),exportSelectedImage:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e;return r("".concat(O.h,"/").concat(O.a.EXPORT_SELECTED_IMAGE),t,{root:!0})}))()},T={setShowExportFBXModal(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_SHOW_EXPORT_MODAL),t,{root:!0})},setShowExportImageModal(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_SHOW_EXPORT_IMAGE_MODAL),t,{root:!0})},setExportVideoModal(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_EXPORT_VIDEO_MODAL),t,{root:!0})},setExportGifModal(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_EXPORT_GIF_MODAL),t,{root:!0})},setShowExportProjectModal(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_SHOW_EXPORT_PROJECT_MODAL),t,{root:!0})},setExportedFBXFiles(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_EXPORTED_FBX_FILES),t,{root:!0})},updateExportFbxFile(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORT_FBX_FILE),t,{root:!0})},deleteFbxExportFile(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.DELETE_FBX_EXPORT_FILE),t,{root:!0})},setIsExportingVideo(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_IS_EXPORTING_VIDEO),t,{root:!0})},updateExportingVideoStatus(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORTING_VIDEO_STATUS),t,{root:!0})},setExportVideoPayload(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_VIDEO_EXPORT_PAYLOAD),t,{root:!0})},setExportModalActiveTab(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_EXPORT_MODAL_ACTIVE_TAB),t,{root:!0})},resetServerExportItems(e){var{commit:t}=e;t("".concat(O.h,"/").concat(O.g.RESET_SERVER_EXPORT_ITEMS),void 0,{root:!0})},setExportItemsFilter(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_EXPORT_ITEMS_FILTER),t,{root:!0})},addOrUpdateServerExportItem(e,t){var{commit:r}=e;m.a.$services.serverRenderProgressSimulator.addOrUpdateServerExportItem(t,(e=>{r("".concat(O.h,"/").concat(O.g.ADD_OR_UPDATE_SERVER_EXPORT_ITEM),e,{root:!0})}))},removeServerExportItem(e,t){var{commit:r}=e;m.a.$services.serverRenderProgressSimulator.removeServerExportItem(t),r("".concat(O.h,"/").concat(O.g.REMOVE_SERVER_EXPORT_ITEM),t,{root:!0})},removeExportDownloadItem(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.REMOVE_EXPORT_DOWNLOAD_ITEM),t,{root:!0})},setIsFetchingExportDownloads(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_IS_FETCHING_EXPORT_DOWNLOADS),t,{root:!0})},setExportDownloads(e,t,r,o,n,c){var{commit:d}=e;d("".concat(O.h,"/").concat(O.g.SET_EXPORT_DOWNLOADS),{items:t,totalItems:r,totalPages:o,currentPage:n,refresh:c},{root:!0})},addOrUpdateExportDownloadItem(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.ADD_OR_UPDATE_EXPORT_DOWNLOAD_ITEM),t,{root:!0})},setSelectedServerExportItem(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_SELECTED_SERVER_EXPORT_ITEM),t,{root:!0})},setServerExportItemToCancel(e,t){var{commit:r}=e;r("".concat(O.h,"/").concat(O.g.SET_SERVER_EXPORT_ITEM_TO_CANCEL),t,{root:!0})},resetExportDownloads(e){var{commit:t}=e;t("".concat(O.h,"/").concat(O.g.RESET_EXPORT_DOWNLOADS),void 0,{root:!0})}},S=r(33),I=r(111),f=r(8),R=r(21),v=r(99),h=r(31),y=r(758),P=r(259),A=r(204),D=r(43),x=r(16),N=r(286),F=r(14),j=r(29),w=r(260),{ASSETMANAGER_PATH:M}=j.a,U=E.a.CancelToken;function C(){return(C=Object(d.a)((function*(e){var t=yield F.b.get("".concat(M,"/export/renderer/aistylist/styles/").concat(e)),{downloadFileName:r,presignedUrl:o}=t.data;if(o)return{downloadFileName:r,presignedUrl:o}}))).apply(this,arguments)}function L(){return(L=Object(d.a)((function*(e){var t=yield F.b.get("".concat(M,"/export/renderer/status/").concat(e)),{isFailed:r,outputFileId:o,exportType:n,fileName:c,format:d,downloaded:l}=t.data;if(r)throw new Error("Job failed");if(o)return{outputFileId:o,exportType:n,fileName:c,format:d,downloaded:l}}))).apply(this,arguments)}function X(e,t){return G.apply(this,arguments)}function G(){return(G=Object(d.a)((function*(e,t){var r=yield F.b.get("".concat(M,"/presigned/").concat(e),{params:{attachmentFilename:t}}),{presignedUrl:o}=r.data;return o}))).apply(this,arguments)}function B(e){return k.apply(this,arguments)}function k(){return(k=Object(d.a)((function*(e){var{exportType:t,format:r,fileName:o,outputFileId:n,renderId:c}=e,d="image"==t?"PNG"==r?"png":"jpg":"video"==t?"mp4":"gif",l="".concat(o,".").concat(d),E=yield X(n,l);Object(D.c)(E,o),F.b.put("".concat(M,"/export/renderer/").concat(c),{downloaded:!0}).catch((()=>{}))}))).apply(this,arguments)}var V={[O.a.EXPORT_VIDEO](e,t){for(var{dispatch:r}=e,{projectTitle:o,format:n,width:c,height:d,startFrame:l,endFrame:E,fps:m,overridingWatermarkFlag:_,isDownload:T=!0}=t,S=[],i=l;i<=E;i++)S.push(i);return r("".concat(O.h,"/").concat(O.a.EXPORT_VIDEO_OR_GIF),{projectTitle:o,exportFrameIndices:S,width:c,height:d,fps:m,format:n,loadingMessage:"ANIMATION IS BEING RENDERED",exportType:"video",startFrame:l,endFrame:E,overridingWatermarkFlag:_,isDownload:T},{root:!0})},[O.a.EXPORT_GIF](e,t){for(var{dispatch:r}=e,{projectTitle:o,width:n,height:c,startFrame:d,endFrame:l,fps:E,transparentBackground:m,overridingWatermarkFlag:_,frameDropIncrement:T,isDownload:S=!0}=t,I=[],f=0,i=d;i<=l;i++){(f%1==0?f+1:Math.ceil(f))>f+T&&I.push(i),f+=T}return r("".concat(O.h,"/").concat(O.a.EXPORT_VIDEO_OR_GIF),{projectTitle:o,width:n,height:c,fps:E,format:"gif",loadingMessage:"ANIMATION IS BEING RENDERED",exportType:"gif",repeat:0,startFrame:d,endFrame:l,transparentBackground:m,overridingWatermarkFlag:_,exportFrameIndices:I,isDownload:S},{root:!0})},[O.a.EXPORT_VIDEO_OR_GIF](e,t){var{commit:r}=e;return Object(v.a)().pauseAnimation(),new Promise(function(){var e=Object(d.a)((function*(e,o){var{projectTitle:n,format:c,loadingMessage:l,exportType:E,fps:m,repeat:_,startFrame:T,endFrame:h,transparentBackground:P=!1,overridingWatermarkFlag:A,exportFrameIndices:w,isDownload:U}=t,C=t.width,L=t.height;C=C%2?C+1:C,L=L%2?L+1:L,r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORTING_VIDEO_STATUS),{progress:0,message:l},{root:!0}),r("".concat(O.h,"/").concat(O.g.SET_IS_EXPORTING_VIDEO),!0,{root:!0});var G=h-T,B=T,k=function(){var e=Object(d.a)((function*(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var progress=Math.floor(99*(B-T)/G);r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORTING_VIDEO_STATUS),{progress:progress,message:l},{root:!0})}else R.b.$widgets.shortcutManager.disableShortcuts=!1,Object(v.a)().setCurrentFrame(T),r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORTING_VIDEO_STATUS),null,{root:!0}),I.a.open({message:"Processing...",type:f.f.INFO,duration:3e3})}));return function(){return e.apply(this,arguments)}}();try{var V=performance.now();R.b.$widgets.shortcutManager.disableShortcuts=!0;var W=Object(y.a)(),H={jobId:W,fileName:n,exportType:E,fps:m,height:L,width:C,repeat:_};yield F.b.post("".concat(M,"/export/gifVideo/init"),H);var $=function(){var e=Object(d.a)((function*(){return new Promise(((e,t)=>{setTimeout(Object(d.a)((function*(){try{var r=T!=B,o=w[w.length-1]!=B,n=yield Object(v.a)().exportImage(C,L,"gif"==E,P,r,o,A);e({frameBase64:n})}catch(e){t(e)}})),0)}))}));return function(){return e.apply(this,arguments)}}(),Y=[],K=function(){var e=Object(d.a)((function*(e){var t=w.indexOf(B),r=yield fetch(e),o=yield r.blob(),n=P?"image/png":"image/jpg",c=P?"png":"jpg";yield R.b.$services.multiUploadService.multipartUpload(o,"gif"==E?j.b.GIF_EXPORTS:j.b.VIDEO_EXPORTS,{key:"".concat(W,"/").concat(t,".").concat(c),contentType:n})}));return function(t){return e.apply(this,arguments)}}();for(Object(v.a)().setCurrentFrame(B);B<=h;){if(w.includes(B)){var{frameBase64:J}=yield $();Y.push(K(J))}k(),B+=1,Object(v.a)().setCurrentFrame(B)}yield Promise.all(Y),k(!1),yield F.b.put("".concat(M,"/export/gifVideo/execute/").concat(W));var z=function(){var e=Object(d.a)((function*(){return yield F.b.get("".concat(M,"/export/gifVideo/status/").concat(W))}));return function(){return e.apply(this,arguments)}}(),Q=yield Object(N.a)(z,84e4),{exportFileId:Z,isFailed:ee}=Q;if(ee)throw new Error("Failed to export gif or video");var te="".concat(n,".").concat(c),re=yield X(Z,te);if(r("".concat(O.h,"/").concat(O.g.SET_IS_EXPORTING_VIDEO),!1,{root:!0}),Object(S.$notify)({clean:!0}),U){var ae,oe;Object(D.c)(re,te),x.a.log("Exported in : ".concat(performance.now()-V," ms")),"gif"==c?(ae="GIF Export",oe={"Is Transparent Background":P}):ae="Video Export",R.b.$mixpanel.track(ae,oe),e()}else{var ne=yield fetch(re);e(yield ne.blob())}r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORTING_VIDEO_STATUS),null,{root:!0})}catch(e){r("".concat(O.h,"/").concat(O.g.UPDATE_EXPORTING_VIDEO_STATUS),null,{root:!0}),x.a.error({error:e},"Error while exporting video"),Object(S.$notify)({type:f.f.ERROR,title:"Problem occurred while exporting video. Please try again."}),r("".concat(O.h,"/").concat(O.g.SET_IS_EXPORTING_VIDEO),!1,{root:!0}),R.b.$widgets.shortcutManager.disableShortcuts=!1,Object(v.a)().setCurrentFrame(T),o(e)}}));return function(t,r){return e.apply(this,arguments)}}())},[O.a.EXPORT_IMAGE]:(e,t)=>Object(d.a)((function*(){var{projectId:r,filename:o,width:n,height:c,isPng:l,transparentBackground:E,scaleFactor:m=1,background:S,backgroundEffect:h,isDownload:P=!0,isPublish:w=!1,addWatermark:U=!1,sceneItemIds:C=[],shouldCountExport:L=!0}=t,X=l?"image/png":"image/jpg",G=l?O.k.PNG:O.k.JPEG,B=o+(l?".png":".jpg"),k=m>1,V=k?n/m:n;V=V%2?V-1:V;var W=k?c/m:c;W=W%2?W-1:W;var image=yield Object(v.a)().exportImage(V,W,l,E);L&&_.countProjectExport(e,r).catch((e=>x.a.error({error:e},"Encounter error counting project export")));try{if(S||null!=h&&h.url||U){I.a.open({message:"Processing...",type:f.f.INFO,duration:3e3});var H=[],$=void 0,Y=void 0;image=image.split(",")[1];var K=Object(A.a)(image),J=new Blob([K]),z=l?"png":"jpg",Q="".concat(o.replaceAll(" ","-"),"-").concat(Object(y.a)(),".").concat(z);if(H.push(R.b.$services.multiUploadService.multipartUpload(J,j.b.DEFAULT_IMAGE_EXPORT,{key:Q,contentType:"image/".concat(z)})),null!=S&&S.image){$="".concat(o.replaceAll(" ","-"),"-").concat(Object(y.a)());var Z=yield fetch(S.image),ee=yield Z.blob();H.push(R.b.$services.multiUploadService.multipartUpload(ee,j.b.DEFAULT_IMAGE_EXPORT,{key:$}))}if(null!=h&&h.url){Y="".concat(o.replaceAll(" ","-"),"-").concat(Object(y.a)());var te=yield fetch(h.url),re=yield te.blob();H.push(R.b.$services.multiUploadService.multipartUpload(re,j.b.RENDERER_FOREGROUND,{key:Y}))}yield Promise.all(H);var ae=(yield F.b.post("".concat(M,"/export/default/init"),{projectId:r,filename:o,baseRenderKey:Q,uploadType:j.b.DEFAULT_IMAGE_EXPORT,width:n,height:c,contentType:X,highRes:k,scaleFactor:m,backgroundImageKey:$,crop:null==S?void 0:S.crop,effect:{s3Key:Y,applyOnBackground:(null==h?void 0:h.type)===O.b.BACKGROUND},color:null==S?void 0:S.color,addWatermark:U,sceneItemIds:C})).data.renderId;R.b.$mixpanel.track("M-Download: default",{"Render Id":ae,width:n,height:c,format:"PNG","With watermark":U});var oe=function(){var e=Object(d.a)((function*(){return yield F.b.get("".concat(M,"/export/default/status/").concat(ae))}));return function(){return e.apply(this,arguments)}}(),{presignedUrl:ne}=yield Object(N.a)(oe,84e4);image=ne,w&&_.publishSceneToCommunity(e,ae).catch((e=>x.a.error({error:e},"Encounter error publishing default render to community"))),I.a.open({type:f.f.SUCCESS,message:"Your export is complete.",duration:3e3})}else if(k){image=image.split(",")[1];var ce=Object(A.a)(image),ie=new Blob([ce]);return yield _.exportImageWithTransformation(e,{imageBlob:ie,width:n,height:c,filename:"".concat(o),isUpscale:!0,isPng:l,transparentBackground:E,isDownload:P})}}catch(e){I.a.open({type:f.f.ERROR,text:"Problem with export. Please try again.",duration:3e3})}if(P){Object(D.c)(image,B);var se=yield Object(v.a)().exportImage(V,W,l,E);se=se.split(",")[1];var de=Object(A.a)(se),le=new Blob([de]),pe=l?"png":"jpg",Ee="".concat(o.replaceAll(" ","-"),"-").concat(Object(y.a)(),".").concat(pe);yield R.b.$services.multiUploadService.multipartUpload(le,j.b.USER_IMAGE,{key:Ee,contentType:"image/".concat(pe)}),_.populateDefaultDownloadToMyDownloads(e,{key:Ee,width:n,height:c,projectId:r,fileName:o,format:O.c.PNG}).catch((e=>x.a.error({error:e},"Encounter error populate default download to my download"))),T.addOrUpdateServerExportItem(e,{renderId:Object(y.a)(),fileName:o,progress:100,status:O.i.COMPLETED,format:G,exportType:O.j.IMAGE,defaultDownloadUrl:se}),R.b.$mixpanel.track("Image Export",{Width:n,Height:c,Format:X,"Is Transparent Background":E,"With watermark":U})}return image}))(),[O.a.FETCH_FBX_FILES]:e=>Object(d.a)((function*(){var{commit:t,dispatch:r}=e;try{var o,n=yield F.b.get("".concat(M,"/export/fbx/status"));if(null!==(o=n.data)&&void 0!==o&&o.content){var c=n.data.content;t("".concat(O.h,"/").concat(O.g.SET_EXPORTED_FBX_FILES),c,{root:!0});var d=!1;c.every((e=>!(!e.isFailed&&!e.fbxFileId)||(d=!0,!1))),d&&r("".concat(O.h,"/").concat(O.a.SUBSCRIBE_TO_EXPORT_FBX_READY),void 0,{root:!0})}}catch(e){x.a.error({error:e},"Failed to fetch FBX files status")}}))(),[O.a.CANCEL_EXPORT_FBX]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e;try{o&&o.cancel(),yield F.b.delete("".concat(M,"/export/fbx/").concat(t)),r("".concat(O.h,"/").concat(O.g.DELETE_FBX_EXPORT_FILE),t,{root:!0})}catch(e){x.a.error({error:e},"Failed to fetch FBX files status")}}))(),[O.a.DOWNLOAD_FBX_FILE]:(e,t)=>Object(d.a)((function*(){var{dispatch:r}=e,{fbxFileId:o,exportName:n,exportId:c}=t;try{var d=yield F.b.get("".concat(M,"/presigned/fbx/").concat(o),{params:{attachmentFilename:n}}),{presignedUrl:l}=d.data;Object(S.$notify)({type:f.f.SUCCESS,title:"Your file will download in few seconds."}),Object(D.c)(l,n),R.b.$mixpanel.track("File Download",{"File Format":"FBX",Success:!0}),yield r("".concat(O.h,"/").concat(O.a.CANCEL_EXPORT_FBX),c,{root:!0})}catch(e){Object(S.$notify)({type:f.f.ERROR,title:"Faild to download your file please try again."})}}))(),[O.a.SUBSCRIBE_TO_EXPORT_FBX_READY]:e=>Object(d.a)((function*(){try{var{commit:t,dispatch:r}=e,o=h.c.lastInitSocketManager,c=function(){var e=Object(d.a)((function*(e){if(e.exportFbx){var r=e.exportFbx;t("".concat(O.h,"/").concat(O.g.UPDATE_EXPORT_FBX_FILE),r,{root:!0}),I.a.open({message:"Your project is successfully exported.",type:f.f.SUCCESS,duration:3e3}),n&&n.cancel(),R.b.$mixpanel.track("File Export",{"File Format":"FBX",Success:!0})}}));return function(t){return e.apply(this,arguments)}}();n?(n.cancel(),n=new h.a):n=new h.a;var l=function(){var e=Object(d.a)((function*(){r("".concat(O.h,"/").concat(O.a.FETCH_FBX_FILES),void 0,{root:!0})}));return function(){return e.apply(this,arguments)}}();yield o.subscribeRequestStream(h.b.SUBSCRIBE_FBX_EXPORTS,null,c,l,null,n)}catch(e){x.a.error({err:e},"Encounter error subscribing for export fbx ready subscribe level")}}))(),[O.a.EXPORT_FBX](e,t){var{commit:r,dispatch:n}=e,{projectTitle:c,exportType:l,projectId:E,doNotExportMuteLayers:m,startFrame:T,endFrame:I}=t,h=(o=U.source()).token,P=Object(y.a)(),A=l&&l==O.d.SINGLE_ANIMATION_LAYER,D="".concat(c,".fbx");r("".concat(f.e,"/").concat(f.d.SET_ENGINE_LOADING_STATUS),{message:"Starting export..."},{root:!0}),_.countProjectExport(e,E).catch((e=>x.a.error({error:e},"Encounter error counting project export"))),setTimeout(Object(d.a)((function*(){try{var e=(yield Object(v.a)().exportProject(c,!0,A,m,T,I)).glTFFiles["".concat(c,".glb")],t="".concat(Object(y.a)(),".glb");yield R.b.$services.multiUploadService.multipartUpload(e,j.b.EXPORT_FBX,{key:t,partSize:6e6,contentType:"application/octet-stream"},h),yield F.b.post("".concat(M,"/export/fbx/init"),{key:t,exportId:P,exportName:D,projectId:E},{cancelToken:h}),r("".concat(O.h,"/").concat(O.g.SET_EXPORTED_FBX_FILES),{exportId:P,projectId:E,exportName:D,fbxFileId:null,isFailed:!1,errorMessage:null},{root:!0}),n("".concat(O.h,"/").concat(O.a.SUBSCRIBE_TO_EXPORT_FBX_READY),void 0,{root:!0}),r("".concat(O.h,"/").concat(O.g.SET_SHOW_EXPORT_MODAL),!0,{root:!0})}catch(e){R.b.$mixpanel.track("File Export",{"File Format":"FBX",Success:!1}),Object(S.$notify)({type:f.f.ERROR,title:"Your file cannot be exported. Please try again.",duration:3e3})}finally{o=null,r("".concat(f.e,"/").concat(f.d.SET_ENGINE_LOADING_STATUS),null,{root:!0})}})),0)},[O.a.EXPORT_PROJECT](e,t){var{commit:r}=e;r("".concat(f.e,"/").concat(f.d.SET_ENGINE_LOADING_STATUS),{message:"Exporting Assets..."},{root:!0});var{projectId:o,filePrefix:n,asGLB:c,exportType:d,doNotExportMuteLayers:l,startFrame:E,endFrame:m}=t,S=d&&d==O.d.SINGLE_ANIMATION_LAYER;_.countProjectExport(e,o).catch((e=>x.a.error({error:e},"Encounter error counting project export"))),setTimeout((()=>{Object(v.a)().exportProject(n,c,S,l,E,m).then((t=>{t.downloadFiles();var r=Object(y.a)(),o=c?O.k.GLB:O.k.GLTF;T.addOrUpdateServerExportItem(e,{renderId:r,fileName:n,progress:100,status:O.i.COMPLETED,format:o,exportType:O.j.THREE_D,defaultDownloadUrl:t}),R.b.$mixpanel.track("File Export",{"File Format":o,Success:!0}),I.a.open({message:"Your project is successfully exported.",type:f.f.SUCCESS,duration:3e3})})).catch((()=>{var e=c?"GLB":"GLTF";R.b.$mixpanel.track("File Export",{"File Format":e,Success:!1}),I.a.open({type:f.f.ERROR,message:"Your file cannot be exported. Please try again.",duration:3e3})})).finally((()=>{r("".concat(f.e,"/").concat(f.d.SET_ENGINE_LOADING_STATUS),null,{root:!0})}))}),50)},[O.a.CHECK_CAN_EXPORT_3D_FILE]:e=>Object(d.a)((function*(){var e=yield F.b.put("".concat(M,"/export/3dfile/complete"));if(e&&e.data){var{canRun:t}=e.data;return t}return!1}))(),[O.a.SUBSCRIBE_TO_SERVER_RENDER_PROGRESS]:e=>Object(d.a)((function*(){try{var t=h.c.lastInitSocketManager,r=w.a.instance,o=function(){var t=Object(d.a)((function*(t){var progress=t.progress;progress.progress&&(progress.progress=parseInt(progress.progress.replace("%","").replace(" ",""))),x.a.log("Received progress",progress.status),progress.status=Object(P.b)(progress.status),T.addOrUpdateServerExportItem(e,progress)}));return function(e){return t.apply(this,arguments)}}(),n=()=>{r.registerWebWorker()};c?(c.cancel(),c=new h.a):c=new h.a;var l=function(){var c=Object(d.a)((function*(){r.terminateWorker(),x.a.log("Reconnecting to render progress stream socket and fetch"),yield _.pollOngoingServerExportStatus(e),yield t.subscribeRequestStream(h.b.SUBSCRIBE_RENDER_PROGRESS,null,o,l,n)}));return function(){return c.apply(this,arguments)}}();yield t.subscribeRequestStream(h.b.SUBSCRIBE_RENDER_PROGRESS,null,o,l,n,c)}catch(e){x.a.error({err:e},"Encounter error subscribing for server export")}}))(),[O.a.SERVER_RENDER](e,t){var{commit:r}=e,{projectId:o,width:n=1024,height:c=1024,samples:l=50,format:E,shadowSoftness:m,scaleFactor:I=1,skipEvents:h=!1,fps:P,repeat:w=0,currentFrame:U,frameRange:C,exportType:L,background:G,backgroundEffect:B,addWatermark:k=!1,sceneItemIds:V=[],downloadImmediately:W,isDownload:H=!0,isPreviewFileRender:$=!1,readyCallback:Y,serverExportIdChangeCallback:K,serverConfigReadyCallback:J}=t,z=$?t.fileName:"".concat(t.fileName," (HD)"),Q=$?"mnm":null,Z=Object(y.a)(),ee=null;C&&(ee=Math.ceil(C[1]/(P||24))),T.addOrUpdateServerExportItem(e,{renderId:Z,fileName:z,progress:0,status:O.i.PREPARING,format:E,exportType:L,animationDuration:ee,isPreviewFileRender:$}),r("".concat(f.e,"/").concat(f.d.SET_ENGINE_LOADING_STATUS),{message:"Preparing for Cloud Render..."},{root:!0}),_.countProjectExport(e,o).catch((e=>x.a.error({error:e},"Encounter error counting project export"))),setTimeout(Object(d.a)((function*(){var _,te,re=300;if(n>c){var ae=re/n;_=re,te=Math.round(c*ae)}else{var oe=re/c;_=Math.round(n*oe),te=re}te=te%2?te-1:te,_=_%2?_-1:_;var ne=Object(v.a)(),image=(yield ne.exportImage(_,te,!1,null==t.background)).split(",")[1];ne.onAfterRenderObservable.addOnce(Object(d.a)((function*(){ne.exportProject(z,!0,!0,!0,void 0,void 0,L===O.j.IMAGE).finally((()=>{r("".concat(f.e,"/").concat(f.d.SET_ENGINE_LOADING_STATUS),null,{root:!0})})).then(function(){var t=Object(d.a)((function*(t){var r,_;if(!t)throw new Error("No GLB exported. Aborting cloud render.");J&&J(),K&&K({renderId:Z});var v=8e6,te="".concat(Object(y.a)(),".glb"),re=R.b.$services.multiUploadService.multipartUpload(t.glTFFiles["".concat(z,".glb")],j.b.RENDERER_GLB,{key:te,partSize:v,contentType:"application/octet-stream"}),ae=Object(A.a)(image),oe=new Blob([ae]),ce="".concat(Object(y.a)(),".jpg"),ie=R.b.$services.multiUploadService.multipartUpload(oe,j.b.RENDERER_THUMBNAIL,{key:ce}),se=ne.getServerRenderSettings(),body=JSON.stringify(se),de=new Blob([body]),le="".concat(Object(y.a)(),".json"),pe=R.b.$services.multiUploadService.multipartUpload(de,j.b.RENDERER_CONFIG,{key:le,partSize:v,contentType:"application/json"});x.a.log("config json",se);var Ee=[re,pe,ie],ue=void 0,Oe=void 0;if(G)if(G.image){var me=yield fetch(G.image),_e=yield me.blob(),Te=Object(y.a)(),Se=R.b.$services.multiUploadService.multipartUpload(_e,j.b.SERVER_RENDER_BACKGROUND,{key:Te});Ee.push(Se),ue={s3Key:Te,crop:G.crop}}else G.color&&(ue={color:G.color});if(B&&B.url){var Ie=yield fetch(B.url),be=yield Ie.blob(),fe=Object(y.a)(),ge=R.b.$services.multiUploadService.multipartUpload(be,j.b.RENDERER_FOREGROUND,{key:fe});Ee.push(ge),Oe={s3Key:fe,applyOnBackground:B.type===O.b.BACKGROUND}}yield Promise.all(Ee);var Re={glbS3Key:te,configS3Key:le,projectId:o,width:n,height:c,samples:l,format:E,shadowSoftness:m,fileName:z,frameRange:C,currentFrame:U,scaleFactor:I,skipEvents:h,fps:P,repeat:w,exportType:L,background:ue,effect:Oe,addWatermark:k,sceneItemIds:V,exrFileId:null==se||null===(r=se.environment)||void 0===r||null===(_=r.environmentMap)||void 0===_?void 0:_.serverFileId,origin:Q},ve=new URLSearchParams(window.location.search),he=ve.get("samples"),ye=ve.get("width"),Pe=ve.get("height");he&&(Re.samples=parseInt(he)),ye&&(Re.width=parseInt(ye)),Pe&&(Re.height=parseInt(Pe));var Ae=yield F.b.post("".concat(M,"/export/renderer/init"),Re),{renderId:De}=Ae.data;$||R.b.$mixpanel.track("M-Download: cloud-render",{"Render Id":De,width:n,height:c,samples:l,format:E,"Shadow Softness":m,"With watermark":k}),h||W||(R.b.$services.serverRenderProgressSimulator.updateRenderIdForExportItem(Z,De),T.removeServerExportItem(e,Z),T.addOrUpdateServerExportItem(e,{renderId:De,fileName:z,progress:0,animationDuration:ee,status:O.i.PREPARING,format:E,exportType:L}),K&&K({renderId:De,isChangeCallback:!0,currentSelectedExport:e.state.selectedServerExportItem})),yield F.b.post("".concat(M,"/multipart/rendererThumbnail"),{key:ce,contentType:"image/png",renderId:De,uploadType:j.b.RENDERER_THUMBNAIL});var xe="";if(h||W){var Ne=function(){var e=Object(d.a)((function*(){return yield F.b.get("".concat(M,"/export/renderer/status/").concat(De))}));return function(){return e.apply(this,arguments)}}(),Fe=yield Object(N.a)(Ne,84e4),{outputFileId:je,isFailed:we}=Fe;if(we)throw new Error("Failed to PixRender");var Me="".concat(z,".png");xe=yield X(je,Me),H&&(Object(D.c)(xe,Me),Object(S.$notify)({type:f.f.SUCCESS,title:"Your cloud render is complete.",duration:3e3}))}Y&&Y(xe)}));return function(e){return t.apply(this,arguments)}}()).catch((t=>{T.removeServerExportItem(e,Z),"400"!=t.status||t.data.canRun?(x.a.error("Encounter error server rendering",t),Object(S.$notify)({type:f.f.ERROR,title:"Problem with cloud render. Please try again.",duration:3e3})):Object(S.$notify)({type:f.f.WARN,title:"Maximum of 3 in progress cloud renders at a time",duration:3e3}),Y&&Y()}))})))})),50)},[O.a.FETCH_EXPORT_DOWNLOADS]:(e,t)=>Object(d.a)((function*(){try{var{refresh:r,refreshOnSuccess:o=!1,page:n,pageSize:c=20,search:d,animation:l,status:E,sortBy:m,type:_}=t,S={pageSize:c,page:n,search:d,animation:l?l==O.m.ANIMATED:void 0,status:E,sortBy:m,type:_};o||T.setIsFetchingExportDownloads(e,!0),r&&T.resetExportDownloads(e);var I=yield F.b.get("".concat(M,"/export/downloads/status"),{params:S});if(I.data&&I.data.content){var{content:content,totalItems:f,totalPages:R}=I.data,v=content.map((e=>({renderId:e.id,type:e.type,fileName:e.fileName,fileId:e.fileId,status:e.type==O.e.AI_GENERATED||e.fileId?O.i.COMPLETED:e.isFailed?O.i.FAILED:e.cancelled?O.i.CANCELLED:O.i.IN_PROGRESS,progress:e.type==O.e.HIGH_QUALITY?e.progress||0:void 0,prompt:e.prompt,format:e.format,exportType:e.exportType,thumbnailUrl:e.thumbnailUrl,size:e.size,updateDate:e.updatedAt,resolution:e.resolution,backgroundRemoved:e.backgroundRemoved})));T.setExportDownloads(e,v,f,R,content.length?n+1:n,o)}}finally{T.setIsFetchingExportDownloads(e,!1)}}))(),[O.a.DOWNLOAD_EXPORT_DOWNLOAD]:(e,t)=>Object(d.a)((function*(){B(t)}))(),[O.a.DOWNLOAD_AI_GENERATED_FILE]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e;try{var{downloadFileName:o,presignedUrl:n}=yield function(e){return C.apply(this,arguments)}(t);if(!n)return;Object(D.c)(n,o)}catch(e){Object(S.$notify)({type:f.f.ERROR,title:"Problem with download. Please try again.",duration:3e3})}}))(),[O.a.DOWNLOAD_SERVER_RENDER_FILE_BY_RENDER_ID]:(e,t)=>Object(d.a)((function*(){var r=!1;try{var{renderId:o,downloadIfNotDownloadedAlready:n=!1}=t,{outputFileId:c,exportType:d,fileName:l,format:E,downloaded:O}=yield function(e){return L.apply(this,arguments)}(o);if(!c)return r;T.addOrUpdateServerExportItem(e,{renderId:o,fileName:l,format:E,exportType:d}),n&&O||(B({outputFileId:c,exportType:d,fileName:l,format:E,renderId:o}),r=!0)}catch(e){Object(S.$notify)({type:f.f.ERROR,title:"Problem with download. Please try again.",duration:3e3})}return r}))(),[O.a.DELETE_SERVER_RENDER_FILE]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e;try{r("".concat(O.h,"/").concat(O.g.REMOVE_SERVER_EXPORT_ITEM),t,{root:!0}),yield F.b.delete("".concat(M,"/export/renderer/").concat(t))}catch(e){}}))(),[O.a.POLL_ONGOING_SERVER_EXPORT_STATUS]:e=>Object(d.a)((function*(){try{for(var t of e.state.serverExportItems){var{data:{outputFileId:r,isFailed:o}}=yield F.b.get("".concat(M,"/export/renderer/status/").concat(t.renderId));T.addOrUpdateServerExportItem(e,{renderId:t.renderId,progress:t.progress,status:o?O.i.FAILED:r?O.i.COMPLETED:O.i.IN_PROGRESS,format:t.format,exportType:t.exportType})}}catch(e){}}))(),[O.a.RETRY_SERVER_RENDER_EXPORT]:(e,t)=>Object(d.a)((function*(){var{renderId:r,format:o,exportType:n}=t;try{T.addOrUpdateServerExportItem(e,{renderId:r,progress:0,status:O.i.PREPARING,format:o,exportType:n}),yield F.b.get("".concat(M,"/export/renderer/retry/").concat(r))}catch(e){}}))(),[O.a.CANCEL_SERVER_RENDER_EXPORT]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e,{renderId:o,shouldRemove:n=!0}=t;try{yield F.b.put("".concat(M,"/export/renderer/cancel/").concat(o)),n&&r("".concat(O.h,"/").concat(O.g.REMOVE_SERVER_EXPORT_ITEM),o,{root:!0})}catch(e){}}))(),[O.a.PUBLISH_SCENE_TO_COMMUNITY]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e;try{yield F.b.put("".concat(M,"/export/renderer/publish/").concat(t))}catch(e){}}))(),[O.a.PUBLISH_AI_SCENE_TO_COMMUNITY]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e;try{yield F.b.put("".concat(M,"/export/renderer/aistylist/publish/").concat(t))}catch(e){}}))(),[O.a.POPULATE_DEFAULT_DOWNLOAD_TO_MY_DOWNLOADS]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e,{width:o,height:n,format:c,projectId:d,fileName:l,key:E}=t;try{yield F.b.put("".concat(M,"/export/default/mydownloads"),{key:E,type:j.b.USER_IMAGE,projectId:d,fileName:l,width:o,height:n,format:c})}catch(e){}}))(),[O.a.POPULATE_IMAGE_TO_MY_DOWNLOADS]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e,{width:o,height:n,isRemoveBackground:c,isUpscale:d,jobId:l,imageStyleId:E}=t;try{yield F.b.put("".concat(M,"/export/renderer/aistylist/mydownloads/").concat(E),{scaledHeight:n,scaledWidth:o,backgroundRemoved:c,highResolution:d,upScaleJobId:l})}catch(e){}}))(),[O.a.EXPORT_IMAGE_WITH_TRANSFORMATION]:(e,t)=>Object(d.a)((function*(){try{var{imageBlob:r,filename:o,width:n,height:c,isPng:d,transparentBackground:l,isUpscale:E,isRemoveBackground:m,isDownload:_}=t;I.a.open({message:"Processing...",type:f.f.INFO,duration:3e3});var S=d?"png":"jpg",v=d?O.k.PNG:O.k.JPEG,h="".concat(o.replaceAll(" ","-"),"-").concat(Object(y.a)(),".").concat(S);yield R.b.$services.multiUploadService.multipartUpload(r,j.b.IMAGE_UPSCALE,{key:h,contentType:"image/".concat(S)});var P=yield F.b.post("".concat(M,"/export/upscale/init"),{key:h,type:j.b.IMAGE_UPSCALE,contentType:"image/".concat(S),upscale:E?{width:n,height:c}:void 0,isRemoveBackground:m}),{jobId:A}=P.data||{};if(A){var N="".concat(o,".").concat(S),w=yield F.b.get("".concat(M,"/export/upscale/").concat(A),{params:{fileName:N}}),{url:U}=w.data||{};if(U)return _&&(Object(D.c)(U,N),T.addOrUpdateServerExportItem(e,{renderId:Object(y.a)(),fileName:o,progress:100,status:O.i.COMPLETED,format:v,exportType:O.j.IMAGE,defaultDownloadUrl:U}),I.a.open({type:f.f.SUCCESS,message:"Your export is complete.",duration:3e3}),R.b.$mixpanel.track("Image Export",{Format:d?"image/png":"image/jpg",Width:n,Height:c,"Is Transparent Background":l||m,"Is Upscale":E,"Is Remove Background":m})),U}}catch(e){x.a.error("Encounter error server rendering",e),I.a.open({type:f.f.ERROR,text:"Problem with export. Please try again.",duration:3e3})}}))(),[O.a.EXPORT_AI_STYLED_IMAGE_WITH_TRANSFORMATION]:(e,t)=>Object(d.a)((function*(){try{var{presignedUrl:r,filename:o,width:n,height:c,isPng:l,transparentBackground:E,isUpscale:O,isRemoveBackground:m,imageStyleId:T}=t;I.a.open({message:"Processing...",type:f.f.INFO,duration:3e3});var v=yield F.b.post("".concat(M,"/export/removebg"),{presignedUrl:r,type:j.b.IMAGE_UPSCALE});if(v.data){var h=o;if(v.data.jobId&&v.data.presignedUrl)return T&&(yield _.populateImageToMyDownloads(e,{width:n,height:c,isRemoveBackground:m,isUpscale:O,jobId:v.data.jobId,imageStyleId:T})),Object(D.b)(v.data.presignedUrl,h),Object(S.$notify)({type:f.f.SUCCESS,title:"Your export is complete.",duration:3e3,clean:!0}),R.b.$mixpanel.track("AI Style Image Export",{Format:l?"image/png":"image/jpg",Width:n,Height:c,"Is Transparent Background":E||m,"Is Upscale":O,"Is Remove Background":m}),{};if(v.data.jobId)return yield new Promise((t=>{var r=setInterval(Object(d.a)((function*(){var o,d=yield F.b.get("".concat(M,"/export/removebg/").concat(v.data.jobId));null!=d&&null!==(o=d.data)&&void 0!==o&&o.presignedUrl&&(t(d.data),clearInterval(r),yield Object(D.b)(d.data.presignedUrl,h),T&&(yield _.populateImageToMyDownloads(e,{width:n,height:c,isRemoveBackground:m,isUpscale:O,jobId:v.data.jobId,imageStyleId:T})),Object(S.$notify)({type:f.f.SUCCESS,title:"Your export is complete.",duration:3e3,clean:!0}),R.b.$mixpanel.track("AI Style Image Export",{Format:l?"image/png":"image/jpg",Width:n,Height:c,"Is Transparent Background":E||m,"Is Upscale":O,"Is Remove Background":m}))})),2e3)})),{}}return{}}catch(e){return x.a.error("Encounter error server rendering",e),Object(S.$notify)({type:f.f.ERROR,title:"Problem with AI Styled export. Please try again.",duration:3e3,clean:!0}),{error:e}}}))(),[O.a.COUNT_PROJECT_EXPORT]:(e,t)=>Object(d.a)((function*(){var{commit:r}=e;try{var o=Object(v.a)().getAllItemsInScene().map((e=>e.itemId));yield F.b.put("".concat(M,"/project/").concat(t,"/export"),{itemIds:o})}catch(e){}}))(),[O.a.EXPORT_SELECTED_IMAGE]:(e,t)=>Object(d.a)((function*(){try{var e=yield fetch(t),r=yield e.blob(),o="img-".concat(Object(y.a)(),".png");yield R.b.$services.multiUploadService.multipartUpload(r,j.b.DEFAULT_IMAGE_EXPORT,{key:o,contentType:"image/png"});var n=yield F.b.post("".concat(M,"/export/downloads/watermarked"),{key:o,uploadType:j.b.DEFAULT_IMAGE_EXPORT,contentType:"image/png"});if(n){var{url:c}=n.data;Object(D.c)(c,o)}}catch(e){}}))(),[O.a.REMOVE_IMAGE_BACKGROUND]:(e,t)=>Object(d.a)((function*(){try{var image=t.split(",")[1],e=Object(A.a)(image),r=new Blob([e]),o="image-remove-bg-".concat(Object(y.a)(),".png");yield R.b.$services.multiUploadService.multipartUpload(r,j.b.IMAGE_UPSCALE,{key:o,contentType:"image/png"});var n=yield F.b.post("".concat(M,"/export/removebg"),{key:o,type:j.b.IMAGE_UPSCALE});if(n.data){if(n.data.presignedUrl)return n.data;if(n.data.jobId)return yield new Promise((e=>{var t=setInterval(Object(d.a)((function*(){var r,o=yield F.b.get("".concat(M,"/export/removebg/").concat(n.data.jobId));if(null!=o&&null!==(r=o.data)&&void 0!==r&&r.presignedUrl)return e(o.data),clearInterval(t),o.data})),2e3)}))}}catch(e){Object(S.$notify)({type:f.f.ERROR,title:"Failed to remove background, please try again"})}}))()},W=r(9);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(W.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y={[O.g.SET_SHOW_EXPORT_MODAL](e,t){e.showExportFBXModal=t},[O.g.SET_SHOW_EXPORT_IMAGE_MODAL](e,t){e.showExportImageModal=t},[O.g.SET_EXPORT_VIDEO_MODAL](e,t){e.exportVideoModal=t},[O.g.SET_EXPORT_GIF_MODAL](e,t){e.exportGifModal=t},[O.g.SET_SHOW_EXPORT_PROJECT_MODAL](e,t){e.showExportProjectModal=t},[O.g.SET_EXPORTED_FBX_FILES](e,t){if(Array.isArray(t))e.exportedFBXFiles=t;else{var r=[...e.exportedFBXFiles];r.unshift(t),e.exportedFBXFiles=r}},[O.g.UPDATE_EXPORT_FBX_FILE](e,t){var r=[...e.exportedFBXFiles],o=r.findIndex((e=>e.exportId==t.exportId));o>=0&&(r[o]=t),e.exportedFBXFiles=r},[O.g.DELETE_FBX_EXPORT_FILE](e,t){var r=e.exportedFBXFiles;e.exportedFBXFiles=r.filter((e=>e.exportId!==t))},[O.g.SET_IS_EXPORTING_VIDEO](e,t){e.isExportingVideo=t},[O.g.UPDATE_EXPORTING_VIDEO_STATUS](e,t){e.exportingVideoProgress=t},[O.g.SET_VIDEO_EXPORT_PAYLOAD](e,t){e.exportVideoPayload=t},[O.g.SET_EXPORT_MODAL_ACTIVE_TAB](e,t){e.exportModalActiveTab=t},[O.g.SET_EXPORT_ITEMS_FILTER](e,t){e.exportItemsFilter=$($({},e.exportItemsFilter),t)},[O.g.ADD_OR_UPDATE_SERVER_EXPORT_ITEM](e,t){var r=[...e.serverExportItems],o=r.findIndex((e=>e.renderId==t.renderId));o>=0&&t.status==O.i.REMOVED?r.splice(o,1):o>=0?r[o]=$($({},r[o]),t):r.unshift($({},t)),e.serverExportItems=r},[O.g.REMOVE_SERVER_EXPORT_ITEM](e,t){var r=e.serverExportItems.findIndex((e=>e.renderId==t));if(r>=0){var o=[...e.serverExportItems];o.splice(r,1),e.serverExportItems=o}},[O.g.RESET_SERVER_EXPORT_ITEMS](e){e.serverExportItems=[]},[O.g.SET_IS_FETCHING_EXPORT_DOWNLOADS](e,t){e.isFetchingExportDownloadItems=t},[O.g.SET_EXPORT_DOWNLOADS](e,t){var{items:r,totalItems:o,totalPages:n,currentPage:c,refresh:d}=t;e.exportDownloadItems=d?r:[...e.exportDownloadItems,...r],e.totalExportDownloadItems=o,e.currentPage=c,e.totalPages=n},[O.g.ADD_OR_UPDATE_EXPORT_DOWNLOAD_ITEM](e,t){var r=[...e.exportDownloadItems],o=e.exportDownloadItems.findIndex((e=>e.renderId==t.renderId)),n=!0;e.exportItemsFilter.currentPage||e.exportItemsFilter.exportStatus&&t.status!==e.exportItemsFilter.exportStatus||e.exportItemsFilter.exportDownloadType==O.e.AI_GENERATED?n=!1:!e.exportItemsFilter.search||t.fileName&&t.fileName.toLowerCase().includes(e.exportItemsFilter.search.toLowerCase())||(n=!1),n=n&&t.status!==O.i.REMOVED,o>=0&&!n?(r.splice(o,1),e.totalExportDownloadItems-=1):o>=0&&n?r[o]=$($({},r[o]),t):n&&(r.unshift(t),e.totalExportDownloadItems+=1),e.exportDownloadItems=r},[O.g.REMOVE_EXPORT_DOWNLOAD_ITEM](e,t){var r=e.exportDownloadItems.findIndex((e=>e.renderId==t));if(r>=0){var o=[...e.exportDownloadItems];o.splice(r,1),e.exportDownloadItems=o,e.totalExportDownloadItems--}},[O.g.SET_SELECTED_SERVER_EXPORT_ITEM](e,t){e.selectedServerExportItem=t},[O.g.SET_SERVER_EXPORT_ITEM_TO_CANCEL](e,t){e.serverExportItemToCancel=t},[O.g.RESET_EXPORT_DOWNLOADS](e){e.exportDownloadItems=[],e.totalExportDownloadItems=null,e.currentPage=0,e.totalPages=null}},K=()=>({showExportFBXModal:!1,showExportImageModal:!1,exportVideoModal:void 0,exportGifModal:void 0,showExportProjectModal:null,exportedFBXFiles:[],isExportingVideo:!1,exportingVideoProgress:null,exportVideoPayload:null,exportModalActiveTab:null,exportItemsFilter:{sortBy:f.g.RECENT,currentPage:0},serverExportItems:[],isFetchingExportDownloadItems:!1,exportDownloadItems:[],totalExportDownloadItems:null,currentPage:0,totalPages:null,selectedServerExportItem:null,serverExportItemToCancel:null}),J={[O.f.IS_SERVER_EXPORT_LIMIT_EXCEEDED]:e=>{var t=e.serverExportItems,r=0;for(var o of t)if(o.status!==O.i.IN_PROGRESS&&o.status!==O.i.PREPARING||(r+=1),r>=P.a)return!0;return!1}}},67:function(e,t,r){"use strict";r.d(t,"a",(function(){return T})),r.d(t,"d",(function(){return I})),r.d(t,"c",(function(){return v})),r.d(t,"f",(function(){return h})),r.d(t,"b",(function(){return y.a})),r.d(t,"e",(function(){return y.b}));var o=r(9),n=r(4),c=r(8),d=r(66),l=r(14),E=r(29);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{ASSETMANAGER_PATH:_}=E.a,T={[c.a.SET_APP_THEME]:(e,t)=>Object(n.a)((function*(){var{commit:r}=e;y.b.setIsLightMode({commit:r},t),t?document.querySelector("html").setAttribute(d.b,d.c):document.querySelector("html").setAttribute(d.b,d.a)}))(),[c.a.GET_TOPICS]:(e,t)=>Object(n.a)((function*(){var r=null;t&&(r=m(m({},t),{},{pageSize:50})),y.b.setIsFetchingTopics(e,!0);try{var o=yield l.b.get("".concat(_,"/topics"),{params:r});o.data&&y.b.updateTopics(e,o.data)}catch(t){y.b.updateTopics(e,null)}finally{y.b.setIsFetchingTopics(e,!1)}}))(),[c.a.SET_APP_LOCALE]:(e,t)=>Object(n.a)((function*(){var{commit:r}=e;y.b.setAppLocale({commit:r},t)}))()},S=r(351),I={[c.d.SET_REFRESH_NOTICE](e,t){e.refreshNotice=t},[c.d.SET_NETWORK_STATUS_MODAL](e,t){e.networkStatusModal=t},[c.d.SET_LOADING_STATUS](e,t){e.loadingStatus=t},[c.d.SET_ENGINE_LOADING_STATUS](e,t){e.engineLoadingStatus=t},[c.d.SET_IS_WEBSOCKET_CONNECTED](e,t){e.isWebsocketConnected=t},[c.d.SET_SHOW_APP_SUSPENSE](e,t){e.showAppSuspense=t},[c.d.SET_IS_APP_WINDOW_ACTIVE](e,t){e.isAppWindowActive=t},[c.d.SET_IS_RECONNECTING_SOCKET](e,t){e.isReconnectingSocket=t},[c.d.SET_IS_LIGHT_MODE](e,t){e.isLightMode=t},[c.d.SET_IS_MOBILE_VIEW](e,t){e.isMobileView=t},[c.d.SET_APP_NEWS_BANNER](e,t){e.newsbanner=t},[c.d.SET_CONTEXT_MENU](e,t){e.contextMenu=t},[c.d.SET_AB_TESTING](e,t){S&&(e.abTesting=S.find((e=>e.id===t)))},[c.d.SET_IS_FETCHING_TOPICS](e,t){e.isFetchingTopics=t},[c.d.SET_SHOW_OVERLAY_ON_MOBILE_EDITOR](e,t){e.showOverlayOnMobileEditor=t},[c.d.UPDATE_TOPICS](e,t){var{content:content,page:r,totalItems:o,totalPages:n}=t,c={page:r,totalItems:o,totalPages:n};content.forEach((e=>{c[e.resourceTypeKey]=[]})),content.forEach((e=>{c[e.resourceTypeKey].push(e)})),e.topics=c},[c.d.SET_APP_LOCALE](e,t){e.locale=t}},f=r(2),R=r(217),v={[c.c.CURRENT_PROMOTION]:(e,t,r,o)=>{var n,c,d=null;if(R){var l=new Date;R.some((e=>l>new Date(e.startDate)&&l<new Date(e.expiredDate)&&(d=e,!0)))}return d&&"DISCOUNT_PROMO"===(null===(n=d)||void 0===n?void 0:n.type)&&o["".concat(f.h,"/").concat(f.d.IS_PRO_OR_ABOVE)]||d&&"CODE_DISCOUNT_PROMO"===(null===(c=d)||void 0===c?void 0:c.type)?null:d},[c.c.CODE_PROMOTION]:(e,t,r,o)=>{var n,c,d=null;if(R){var l=new Date;R.some((e=>l>new Date(e.startDate)&&l<new Date(e.expiredDate)&&(d=e,!0)))}return d&&"CODE_DISCOUNT_PROMO"!==(null===(n=d)||void 0===n?void 0:n.type)||d&&"CODE_DISCOUNT_PROMO"===(null===(c=d)||void 0===c?void 0:c.type)&&o["".concat(f.h,"/").concat(f.d.IS_PRO_OR_ABOVE)]?null:d}},h=()=>({locale:null,refreshNotice:null,networkStatusModal:null,loadingStatus:null,engineLoadingStatus:null,isWebsocketConnected:!1,showAppSuspense:!1,isAppWindowActive:!0,isReconnectingSocket:!1,isLightMode:!1,isMobileView:!1,showLayoutFooter:!0,showLayoutHeader:!0,showOverlayOnMobileEditor:!1,isLightTheme:!0,showPixRenderAnnouncement:!1,contextMenu:{showContextMenu:!1,menuPos:void 0,menuOptions:void 0},newsbanner:null,topics:{page:null,totalPages:null,totalItems:null},isFetchingTopics:!1,abTesting:null}),y=r(215)}}]);
//# sourceMappingURL=m0v51r1f.b58bf2b6.js.map