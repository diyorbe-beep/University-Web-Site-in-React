(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{137:function(e,t,n){"use strict";function r(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.isIgnore=function(e){return(e&l.IGNORE)===l.IGNORE},t.isMetadata=function(e){return(e&l.METADATA)===l.METADATA},t.isComplete=function(e){return(e&l.COMPLETE)===l.COMPLETE},t.isNext=function(e){return(e&l.NEXT)===l.NEXT},t.isRespond=function(e){return(e&l.RESPOND)===l.RESPOND},t.isResumeEnable=function(e){return(e&l.RESUME_ENABLE)===l.RESUME_ENABLE},t.isLease=function(e){return(e&l.LEASE)===l.LEASE},t.isFollows=function(e){return(e&l.FOLLOWS)===l.FOLLOWS},t.isResumePositionFrameType=function(e){return e===c.CANCEL||e===c.ERROR||e===c.PAYLOAD||e===c.REQUEST_CHANNEL||e===c.REQUEST_FNF||e===c.REQUEST_RESPONSE||e===c.REQUEST_STREAM||e===c.REQUEST_N},t.getFrameTypeName=f,t.createErrorFromFrame=function(e){const{code:code,message:t}=e,n=S(code),r=new Error(function(e,...t){let n=0;return e.replace(/%s/g,(e=>t[n++]))}("RSocket error %s (%s): %s. See error `source` property for details.",A(code),n,t));return r.source={code:code,explanation:n,message:t},r},t.getErrorCodeExplanation=S,t.printFrame=function(e){const t=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(t){o(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},e);t.type=f(e.type)+` (${A(e.type)})`;const n=[];for(const t in l){const r=l[t];(e.flags&r)===r&&n.push(t)}n.length||n.push("NO FLAGS");t.flags=n.join(" | ")+` (${A(e.flags)})`,e.type===c.ERROR&&(t.code=S(e.code)+` (${A(e.code)})`);return JSON.stringify(t,null,2)},t.MAX_VERSION=t.MAX_TTL=t.MAX_STREAM_ID=t.MAX_RESUME_LENGTH=t.MAX_REQUEST_N=t.MAX_REQUEST_COUNT=t.MAX_MIME_LENGTH=t.MAX_METADATA_LENGTH=t.MAX_LIFETIME=t.MAX_KEEPALIVE=t.MAX_CODE=t.FRAME_TYPE_OFFFSET=t.FLAGS_MASK=t.ERROR_EXPLANATIONS=t.ERROR_CODES=t.FLAGS=t.FRAME_TYPE_NAMES=t.FRAME_TYPES=t.CONNECTION_STREAM_ID=void 0;t.CONNECTION_STREAM_ID=0;const c={CANCEL:9,ERROR:11,EXT:63,KEEPALIVE:3,LEASE:2,METADATA_PUSH:12,PAYLOAD:10,REQUEST_CHANNEL:7,REQUEST_FNF:5,REQUEST_N:8,REQUEST_RESPONSE:4,REQUEST_STREAM:6,RESERVED:0,RESUME:13,RESUME_OK:14,SETUP:1};t.FRAME_TYPES=c;const E={};t.FRAME_TYPE_NAMES=E;for(const e in c){const t=c[e];E[t]=e}const l={COMPLETE:64,FOLLOWS:128,IGNORE:512,LEASE:64,METADATA:256,NEXT:32,RESPOND:128,RESUME_ENABLE:128};t.FLAGS=l;const _={APPLICATION_ERROR:513,CANCELED:515,CONNECTION_CLOSE:258,CONNECTION_ERROR:257,INVALID:516,INVALID_SETUP:1,REJECTED:514,REJECTED_RESUME:4,REJECTED_SETUP:3,RESERVED:0,RESERVED_EXTENSION:4294967295,UNSUPPORTED_SETUP:2};t.ERROR_CODES=_;const d={};t.ERROR_EXPLANATIONS=d;for(const e in _){d[_[e]]=e}t.FLAGS_MASK=1023;t.FRAME_TYPE_OFFFSET=10;t.MAX_CODE=2147483647;t.MAX_KEEPALIVE=2147483647;t.MAX_LIFETIME=2147483647;t.MAX_METADATA_LENGTH=16777215;t.MAX_MIME_LENGTH=255;t.MAX_REQUEST_COUNT=2147483647;t.MAX_REQUEST_N=2147483647;t.MAX_RESUME_LENGTH=65535;t.MAX_STREAM_ID=2147483647;t.MAX_TTL=2147483647;function f(e){const t=E[e];return null!=t?t:A(e)}function S(code){const e=d[code];return null!=e?e:code<=768?"RESERVED (PROTOCOL)":"RESERVED (APPLICATION)"}function A(e){return"0x"+e.toString(16)}t.MAX_VERSION=65535},174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt24BE=function(e,t){const n=e.readUInt8(t)<<16,r=e.readUInt8(t+1)<<8,o=e.readUInt8(t+2);return n|r|o},t.writeUInt24BE=function(e,t,n){return n=e.writeUInt8(t>>>16,n),n=e.writeUInt8(t>>>8&255,n),e.writeUInt8(255&t,n)},t.readUInt64BE=function(e,t){const n=e.readUInt32BE(t),r=e.readUInt32BE(t+4);return n*o+r},t.writeUInt64BE=function(e,t,n){const r=t/o|0,c=t%o;return n=e.writeUInt32BE(r,n),e.writeUInt32BE(c,n)},t.byteLength=function(data,e){if(null==data)return 0;return r.LiteBuffer.byteLength(data,e)},t.createBuffer=t.toBuffer=void 0;var r=n(173);const o=4294967296;const c="function"==typeof r.LiteBuffer.from?(...e)=>e[0]instanceof r.LiteBuffer?e[0]:r.LiteBuffer.from.apply(r.LiteBuffer,e):(...e)=>e[0]instanceof r.LiteBuffer?e[0]:new(r.LiteBuffer.bind.apply(r.LiteBuffer,[r.LiteBuffer,...e]));t.toBuffer=c;const E="function"==typeof r.LiteBuffer.alloc?e=>r.LiteBuffer.alloc(e):e=>new r.LiteBuffer(e).fill(0);t.createBuffer=E},238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentitySerializers=t.IdentitySerializer=t.JsonSerializers=t.JsonSerializer=void 0;var r,o=n(173),c=(r=n(155))&&r.__esModule?r:{default:r};const E={deserialize:data=>{let e;if(null==data)return null;if("string"==typeof data)e=data;else if(o.LiteBuffer.isBuffer(data)){e=data.toString("utf8")}else{e=o.LiteBuffer.from(data).toString("utf8")}return JSON.parse(e)},serialize:JSON.stringify};t.JsonSerializer=E;const l={data:E,metadata:E};t.JsonSerializers=l;const _={deserialize:data=>((0,c.default)(null==data||"string"==typeof data||o.LiteBuffer.isBuffer(data)||data instanceof Uint8Array,"RSocketSerialization: Expected data to be a string, Buffer, or Uint8Array. Got `%s`.",data),data),serialize:data=>data};t.IdentitySerializer=_;const d={data:_,metadata:_};t.IdentitySerializers=d},239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponderLeaseHandler=t.RequesterLeaseHandler=t.Leases=t.Lease=void 0;var r,o=(r=n(155))&&r.__esModule?r:{default:r},c=n(154),E=n(137);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _{constructor(e,t,n){(0,o.default)(e>0,"Lease time-to-live must be positive"),(0,o.default)(t>0,"Lease allowed requests must be positive"),this.timeToLiveMillis=e,this.allowedRequests=t,this.startingAllowedRequests=t,this.expiry=Date.now()+e,this.metadata=n}expired(){return Date.now()>this.expiry}valid(){return this.allowedRequests>0&&!this.expired()}_use(){if(this.expired())return!1;const e=this.allowedRequests,t=e>0;return t&&(this.allowedRequests=e-1),t}}t.Lease=_;t.Leases=class{constructor(){l(this,"_sender",(()=>c.Flowable.never())),l(this,"_receiver",(e=>{}))}sender(e){return this._sender=e,this}receiver(e){return this._receiver=e,this}stats(e){return this._stats=e,this}};t.RequesterLeaseHandler=class{constructor(e){l(this,"_requestN",-1),e(new c.Flowable((e=>{this._subscriber?e.onError(new Error("only 1 subscriber is allowed")):this.isDisposed()?e.onComplete():(this._subscriber=e,e.onSubscribe({cancel:()=>{this.dispose()},request:t=>{if(t<=0&&e.onError(new Error(`request demand must be positive: ${t}`)),!this.isDisposed()){const e=this._requestN;this._onRequestN(e),this._requestN=Math.min(Number.MAX_SAFE_INTEGER,Math.max(0,e)+t)}}}))})))}use(){const e=this._lease;return!!e&&e._use()}errorMessage(){return d(this._lease)}receive(e){if(!this.isDisposed()){const t=e.ttl,n=e.requestCount,r=e.metadata;this._onLease(new _(t,n,r))}}availability(){const e=this._lease;return e&&e.valid()?e.allowedRequests/e.startingAllowedRequests:0}dispose(){if(!this._isDisposed){this._isDisposed=!0;const s=this._subscriber;s&&s.onComplete()}}isDisposed(){return this._isDisposed}_onRequestN(e){const t=this._lease,s=this._subscriber;e<0&&t&&s&&s.onNext(t)}_onLease(e){const s=this._subscriber,t=this._requestN-1;t>=0&&s&&s.onNext(e),this._requestN=Math.max(-1,t),this._lease=e}};function d(e){if(!e)return"Lease was not received yet";if(e.valid())return"Missing leases";{const t=e.expired(),n=e.allowedRequests;return`Missing leases. Expired: ${t.toString()}, allowedRequests: ${n}`}}t.ResponderLeaseHandler=class{constructor(e,t,n){this._leaseSender=e,this._stats=t,this._errorConsumer=n}use(){const e=this._lease,t=!!e&&e._use();return this._onStatsEvent(t),t}errorMessage(){return d(this._lease)}send(e){let t,n;return this._leaseSender(this._stats).subscribe({onComplete:()=>this._onStatsEvent(),onError:e=>{this._onStatsEvent();const t=this._errorConsumer;t&&t(e)},onNext:t=>{this._lease=t,e(t)},onSubscribe:s=>{n?s.cancel():(s.request(E.MAX_REQUEST_N),t=s)}}),{dispose(){n||(n=!0,this._onStatsEvent(),t&&t.cancel())},isDisposed:()=>n}}_onStatsEvent(e){const s=this._stats;if(s){const t=void 0===e?"Terminate":e?"Accept":"Reject";s.onEvent(t)}}}},450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServerMachine=function(e,t,n,r,o,c,E){return new f("SERVER",e,t,n,r,void 0,o,c,E)},t.createClientMachine=function(e,t,n,r,o,c,E,l){return new f("CLIENT",e,t,n,r,o,c,E,l)};var r=n(154),o=n(137),c=n(238);n(239);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){_(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{constructor(e){this._responder=e||{}}setResponder(e){this._responder=e||{}}fireAndForget(e){if(this._responder.fireAndForget)try{this._responder.fireAndForget(e)}catch(e){console.error("fireAndForget threw an exception",e)}}requestResponse(e){let t;if(this._responder.requestResponse)try{return this._responder.requestResponse(e)}catch(e){console.error("requestResponse threw an exception",e),t=e}return r.Single.error(t||new Error("not implemented"))}requestStream(e){let t;if(this._responder.requestStream)try{return this._responder.requestStream(e)}catch(e){console.error("requestStream threw an exception",e),t=e}return r.Flowable.error(t||new Error("not implemented"))}requestChannel(e){let t;if(this._responder.requestChannel)try{return this._responder.requestChannel(e)}catch(e){console.error("requestChannel threw an exception",e),t=e}return r.Flowable.error(t||new Error("not implemented"))}metadataPush(e){let t;if(this._responder.metadataPush)try{return this._responder.metadataPush(e)}catch(e){console.error("metadataPush threw an exception",e),t=e}return r.Single.error(t||new Error("not implemented"))}}class f{constructor(e,t,n,r,E,l,f,S,A){_(this,"_connectionAvailability",1),_(this,"_handleTransportClose",(()=>{this._handleError(new Error("RSocket: The connection was closed."))})),_(this,"_handleError",(e=>{this._receivers.forEach((t=>{t.onError(e)})),this._receivers.clear(),this._subscriptions.forEach((e=>{e.cancel()})),this._subscriptions.clear(),this._connectionAvailability=0,this._dispose(this._requesterLeaseHandler,this._responderLeaseSenderDisposable);const t=this._keepAliveTimerHandle;t&&(clearTimeout(t),this._keepAliveTimerHandle=null)})),_(this,"_handleFrame",(e=>{const{streamId:t}=e;t===o.CONNECTION_STREAM_ID?this._handleConnectionFrame(e):this._handleStreamFrame(t,e)})),this._connection=t,this._requesterLeaseHandler=S,this._responderLeaseHandler=A,this._nextStreamId="CLIENT"===e?1:2,this._receivers=new Map,this._subscriptions=new Map,this._serializers=E||c.IdentitySerializers,this._requestHandler=new d(l),this._errorHandler=f,n({onComplete:this._handleTransportClose,onError:this._handleError,onNext:this._handleFrame,onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)});const m=this._responderLeaseHandler;m&&(this._responderLeaseSenderDisposable=m.send(this._leaseFrameSender())),this._connection.connectionStatus().subscribe({onNext:e=>{"CLOSED"===e.kind?this._handleTransportClose():"ERROR"===e.kind&&this._handleError(e.error)},onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)});this._keepAliveLastReceivedMillis=Date.now();const T=()=>{const e=Date.now()-this._keepAliveLastReceivedMillis;e>=r?this._handleConnectionError(new Error(`No keep-alive acks for ${r} millis`)):this._keepAliveTimerHandle=setTimeout(T,Math.max(100,r-e))};this._keepAliveTimerHandle=setTimeout(T,r)}setRequestHandler(e){this._requestHandler.setResponder(e)}close(){this._connection.close()}connectionStatus(){return this._connection.connectionStatus()}availability(){const e=this._requesterLeaseHandler,t=e?e.availability():1;return Math.min(this._connectionAvailability,t)}fireAndForget(e){if(this._useLeaseOrError(this._requesterLeaseHandler))return;const t=this._getNextStreamId(this._receivers),data=this._serializers.data.serialize(e.data),n=this._serializers.metadata.serialize(e.metadata),r={data:data,flags:void 0!==e.metadata?o.FLAGS.METADATA:0,metadata:n,streamId:t,type:o.FRAME_TYPES.REQUEST_FNF};this._connection.sendOne(r)}requestResponse(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return r.Single.error(new Error(t));const n=this._getNextStreamId(this._receivers);return new r.Single((t=>{this._receivers.set(n,{onComplete:()=>{},onError:e=>t.onError(e),onNext:data=>t.onComplete(data)});const data=this._serializers.data.serialize(e.data),r=this._serializers.metadata.serialize(e.metadata),c={data:data,flags:void 0!==e.metadata?o.FLAGS.METADATA:0,metadata:r,streamId:n,type:o.FRAME_TYPES.REQUEST_RESPONSE};this._connection.sendOne(c),t.onSubscribe((()=>{this._receivers.delete(n);const e={flags:0,streamId:n,type:o.FRAME_TYPES.CANCEL};this._connection.sendOne(e)}))}))}requestStream(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return r.Flowable.error(new Error(t));const n=this._getNextStreamId(this._receivers);return new r.Flowable((t=>{this._receivers.set(n,t);let r=!1;t.onSubscribe({cancel:()=>{if(this._receivers.delete(n),!r)return;const e={flags:0,streamId:n,type:o.FRAME_TYPES.CANCEL};this._connection.sendOne(e)},request:t=>{if(t>o.MAX_REQUEST_N&&(t=o.MAX_REQUEST_N),r){const e={flags:0,requestN:t,streamId:n,type:o.FRAME_TYPES.REQUEST_N};this._connection.sendOne(e)}else{r=!0;const data=this._serializers.data.serialize(e.data),c=this._serializers.metadata.serialize(e.metadata),E={data:data,flags:void 0!==e.metadata?o.FLAGS.METADATA:0,metadata:c,requestN:t,streamId:n,type:o.FRAME_TYPES.REQUEST_STREAM};this._connection.sendOne(E)}}})}),o.MAX_REQUEST_N)}requestChannel(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return r.Flowable.error(new Error(t));const n=this._getNextStreamId(this._receivers);let c=!1;return new r.Flowable((t=>{try{this._receivers.set(n,t);let r=!1;t.onSubscribe({cancel:()=>{if(this._receivers.delete(n),!r)return;const e={flags:0,streamId:n,type:o.FRAME_TYPES.CANCEL};this._connection.sendOne(e)},request:t=>{if(t>o.MAX_REQUEST_N&&(t=o.MAX_REQUEST_N),r){const e={flags:0,requestN:t,streamId:n,type:o.FRAME_TYPES.REQUEST_N};this._connection.sendOne(e)}else c?console.warn("RSocketClient: re-entrant call to request n before initial channel established."):(c=!0,e.subscribe({onComplete:()=>{this._sendStreamComplete(n)},onError:e=>{this._sendStreamError(n,e.message)},onNext:e=>{const data=this._serializers.data.serialize(e.data),c=this._serializers.metadata.serialize(e.metadata);if(r){const t={data:data,flags:o.FLAGS.NEXT|(void 0!==e.metadata?o.FLAGS.METADATA:0),metadata:c,streamId:n,type:o.FRAME_TYPES.PAYLOAD};this._connection.sendOne(t)}else{r=!0;const E={data:data,flags:void 0!==e.metadata?o.FLAGS.METADATA:0,metadata:c,requestN:t,streamId:n,type:o.FRAME_TYPES.REQUEST_CHANNEL};this._connection.sendOne(E)}},onSubscribe:e=>{this._subscriptions.set(n,e),e.request(1)}}))}})}catch(e){console.warn("Exception while subscribing to channel flowable:"+e)}}),o.MAX_REQUEST_N)}metadataPush(e){return new r.Single((t=>{const n={flags:0,metadata:this._serializers.metadata.serialize(e.metadata),streamId:0,type:o.FRAME_TYPES.METADATA_PUSH};this._connection.sendOne(n),t.onSubscribe((()=>{})),t.onComplete()}))}_getNextStreamId(e){const t=this._nextStreamId;do{this._nextStreamId=this._nextStreamId+2&o.MAX_STREAM_ID}while(0===this._nextStreamId||e.has(t));return t}_useLeaseOrError(e){if(e&&!e.use())return e.errorMessage()}_leaseFrameSender(){return e=>this._connection.sendOne({flags:0,metadata:e.metadata,requestCount:e.allowedRequests,streamId:o.CONNECTION_STREAM_ID,ttl:e.timeToLiveMillis,type:o.FRAME_TYPES.LEASE})}_dispose(...e){e.forEach((e=>{e&&e.dispose()}))}_isRequest(e){switch(e){case o.FRAME_TYPES.REQUEST_FNF:case o.FRAME_TYPES.REQUEST_RESPONSE:case o.FRAME_TYPES.REQUEST_STREAM:case o.FRAME_TYPES.REQUEST_CHANNEL:return!0;default:return!1}}_handleConnectionError(e){this._handleError(e),this._connection.close();const t=this._errorHandler;t&&t(e)}_handleConnectionFrame(e){switch(e.type){case o.FRAME_TYPES.ERROR:const t=(0,o.createErrorFromFrame)(e);this._handleConnectionError(t);break;case o.FRAME_TYPES.EXT:break;case o.FRAME_TYPES.KEEPALIVE:this._keepAliveLastReceivedMillis=Date.now(),(0,o.isRespond)(e.flags)&&this._connection.sendOne(l(l({},e),{},{flags:e.flags^o.FLAGS.RESPOND,lastReceivedPosition:0}));break;case o.FRAME_TYPES.LEASE:const n=this._requesterLeaseHandler;n&&n.receive(e);break;case o.FRAME_TYPES.METADATA_PUSH:this._handleMetadataPush(e);case o.FRAME_TYPES.REQUEST_CHANNEL:case o.FRAME_TYPES.REQUEST_FNF:case o.FRAME_TYPES.REQUEST_RESPONSE:case o.FRAME_TYPES.REQUEST_STREAM:case o.FRAME_TYPES.RESERVED:case o.FRAME_TYPES.RESUME:case o.FRAME_TYPES.RESUME_OK:}}_handleStreamFrame(e,t){if(this._isRequest(t.type)){const t=this._useLeaseOrError(this._responderLeaseHandler);if(t)return void this._sendStreamError(e,t)}switch(t.type){case o.FRAME_TYPES.CANCEL:this._handleCancel(e,t);break;case o.FRAME_TYPES.REQUEST_N:this._handleRequestN(e,t);break;case o.FRAME_TYPES.REQUEST_FNF:this._handleFireAndForget(e,t);break;case o.FRAME_TYPES.REQUEST_RESPONSE:this._handleRequestResponse(e,t);break;case o.FRAME_TYPES.REQUEST_STREAM:this._handleRequestStream(e,t);break;case o.FRAME_TYPES.REQUEST_CHANNEL:this._handleRequestChannel(e,t);break;case o.FRAME_TYPES.ERROR:const n=(0,o.createErrorFromFrame)(t);this._handleStreamError(e,n);break;case o.FRAME_TYPES.PAYLOAD:const r=this._receivers.get(e);if(null!=r){if((0,o.isNext)(t.flags)){const e={data:this._serializers.data.deserialize(t.data),metadata:this._serializers.metadata.deserialize(t.metadata)};r.onNext(e)}(0,o.isComplete)(t.flags)&&(this._receivers.delete(e),r.onComplete())}}}_handleCancel(e,t){const n=this._subscriptions.get(e);n&&(n.cancel(),this._subscriptions.delete(e))}_handleRequestN(e,t){const n=this._subscriptions.get(e);n&&n.request(t.requestN)}_handleFireAndForget(e,t){const n=this._deserializePayload(t);this._requestHandler.fireAndForget(n)}_handleRequestResponse(e,t){const n=this._deserializePayload(t);this._requestHandler.requestResponse(n).subscribe({onComplete:t=>{this._sendStreamPayload(e,t,!0)},onError:t=>this._sendStreamError(e,t.message),onSubscribe:t=>{const n={cancel:t,request:()=>{}};this._subscriptions.set(e,n)}})}_handleRequestStream(e,t){const n=this._deserializePayload(t);this._requestHandler.requestStream(n).subscribe({onComplete:()=>this._sendStreamComplete(e),onError:t=>this._sendStreamError(e,t.message),onNext:t=>this._sendStreamPayload(e,t),onSubscribe:n=>{this._subscriptions.set(e,n),n.request(t.requestN)}})}_handleRequestChannel(e,t){if(this._subscriptions.get(e))return;const n=new r.Flowable((n=>{let r=!0;n.onSubscribe({cancel:()=>{this._receivers.delete(e);const t={flags:0,streamId:e,type:o.FRAME_TYPES.CANCEL};this._connection.sendOne(t)},request:c=>{if(c>o.MAX_REQUEST_N&&(c=o.MAX_REQUEST_N),r&&c--,c>0){const t={flags:0,requestN:c,streamId:e,type:o.FRAME_TYPES.REQUEST_N};this._connection.sendOne(t)}r&&c>=0&&(r=!1,n.onNext(t))}})}),o.MAX_REQUEST_N),c=new r.FlowableProcessor(n,(e=>this._deserializePayload(e)));this._receivers.set(e,c),this._requestHandler.requestChannel(c).subscribe({onComplete:()=>this._sendStreamComplete(e),onError:t=>this._sendStreamError(e,t.message),onNext:t=>this._sendStreamPayload(e,t),onSubscribe:n=>{this._subscriptions.set(e,n),n.request(t.requestN)}})}_handleMetadataPush(e){const t=this._deserializeMetadataPushPayload(e);this._requestHandler.metadataPush(t).subscribe({onComplete:()=>{},onError:e=>{},onSubscribe:e=>{}})}_sendStreamComplete(e){this._subscriptions.delete(e),this._connection.sendOne({data:null,flags:o.FLAGS.COMPLETE,metadata:null,streamId:e,type:o.FRAME_TYPES.PAYLOAD})}_sendStreamError(e,t){this._subscriptions.delete(e),this._connection.sendOne({code:o.ERROR_CODES.APPLICATION_ERROR,flags:0,message:t,streamId:e,type:o.FRAME_TYPES.ERROR});const n=new Error(`terminated from the requester: ${t}`);this._handleStreamError(e,n)}_sendStreamPayload(e,t,n=!1){let r=o.FLAGS.NEXT;n&&(r|=o.FLAGS.COMPLETE,this._subscriptions.delete(e));const data=this._serializers.data.serialize(t.data),c=this._serializers.metadata.serialize(t.metadata);this._connection.sendOne({data:data,flags:r,metadata:c,streamId:e,type:o.FRAME_TYPES.PAYLOAD})}_deserializePayload(e){return function(e,t){return{data:e.data.deserialize(t.data),metadata:e.metadata.deserialize(t.metadata)}}(this._serializers,e)}_deserializeMetadataPushPayload(e){return function(e,t){return{data:null,metadata:e.metadata.deserialize(t.metadata)}}(this._serializers,e)}_handleStreamError(e,t){const n=this._receivers.get(e);null!=n&&(this._receivers.delete(e),n.onError(t))}}},452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReassemblyDuplexConnection=void 0;var r=n(173),o=(n(154),n(137));t.ReassemblyDuplexConnection=class{constructor(source){this._source=source}sendOne(e){this._source.sendOne(e)}send(input){this._source.send(input)}receive(){return this._source.receive().lift((e=>new c(e)))}close(){this._source.close()}connect(){this._source.connect()}connectionStatus(){return this._source.connectionStatus()}};class c{constructor(e){var t,n,r;t=this,n="_framesReassemblyMap",r=new Map,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._actual=e}request(e){this._subscription.request(e)}cancel(){this._subscription.cancel(),this._framesReassemblyMap.clear()}onSubscribe(s){null==this._subscription?(this._subscription=s,this._actual.onSubscribe(this)):s.cancel()}onComplete(){this._actual.onComplete()}onError(e){this._actual.onError(e)}onNext(e){const t=e.streamId;if(t!==o.CONNECTION_STREAM_ID){const n=(0,o.isFollows)(e.flags),r=(0,o.isComplete)(e.flags),c=e.type===o.FRAME_TYPES.ERROR||e.type===o.FRAME_TYPES.CANCEL,l=this._framesReassemblyMap.get(t);if(l){if(!c)return l.metadata&&e.metadata&&(l.metadata=E(l.metadata,e.metadata)),l.data&&e.data?l.data=E(l.data,e.data):!l.data&&e.data&&(l.data=e.data),void(n&&!r||(r&&(l.flags|=o.FLAGS.COMPLETE),this._framesReassemblyMap.delete(t),this._actual.onNext(l)));this._framesReassemblyMap.delete(t)}else if(n&&!r&&!c)return void this._framesReassemblyMap.set(t,e)}this._actual.onNext(e)}}const E=(a,b)=>{switch(a.constructor.name){case"String":return a+b;case"Uint8Array":const e=new Uint8Array(a.length+b.length);return e.set(a),e.set(b,a.length),e;default:return r.LiteBuffer.concat([a,b])}}},454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeFrameWithLength=function(e,t){const n=(0,l.readUInt24BE)(e,0);return f(e.slice(d,d+n),t)},t.deserializeFrames=function(e,t){const n=[];let r=0;for(;r+d<e.length;){const o=(0,l.readUInt24BE)(e,r),c=r+d,E=c+o;if(E>e.length)break;const _=f(e.slice(c,E),t);n.push(_),r=E}return[n,e.slice(r,e.length)]},t.serializeFrameWithLength=function(e,t){const n=S(e,t),r=(0,l.createBuffer)(n.length+d);return(0,l.writeUInt24BE)(r,n.length,0),n.copy(r,d,0,n.length),r},t.deserializeFrame=f,t.serializeFrame=S,t.sizeOfFrame=function(e,t){switch(t=t||E.Utf8Encoders,e.type){case c.FRAME_TYPES.SETUP:return function(e,t){const n=null!=e.resumeToken?t.resumeToken.byteLength(e.resumeToken):0,r=null!=e.metadataMimeType?t.metadataMimeType.byteLength(e.metadataMimeType):0,o=null!=e.dataMimeType?t.dataMimeType.byteLength(e.dataMimeType):0,c=y(e,t);return _+A+(n?m+n:0)+r+o+c}(e,t);case c.FRAME_TYPES.PAYLOAD:return function(e,t){const n=y(e,t);return _+n}(e,t);case c.FRAME_TYPES.ERROR:return function(e,t){const n=null!=e.message?t.message.byteLength(e.message):0;return _+T+n}(e,t);case c.FRAME_TYPES.KEEPALIVE:return function(e,t){const n=null!=e.data?t.data.byteLength(e.data):0;return _+h+n}(e,t);case c.FRAME_TYPES.REQUEST_FNF:case c.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t){const n=y(e,t);return _+n}(e,t);case c.FRAME_TYPES.REQUEST_STREAM:case c.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t){const n=y(e,t);return _+P+n}(e,t);case c.FRAME_TYPES.METADATA_PUSH:return function(e,t){return _+(null!=e.metadata?t.metadata.byteLength(e.metadata):0)}(e,t);case c.FRAME_TYPES.REQUEST_N:return _+O;case c.FRAME_TYPES.RESUME:return function(e,t){const n=t.resumeToken.byteLength(e.resumeToken);return _+M+n}(e,t);case c.FRAME_TYPES.RESUME_OK:return _+I;case c.FRAME_TYPES.CANCEL:return _;case c.FRAME_TYPES.LEASE:return function(e,t){const n=null!=e.metadata?t.metadata.byteLength(e.metadata):0;return _+R+n}(e,t);default:(0,o.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,c.getFrameTypeName)(e.type))}};var r,o=(r=n(155))&&r.__esModule?r:{default:r},c=n(137),E=n(455),l=n(174);const _=6,d=3;function f(e,t){t=t||E.Utf8Encoders;let n=0;const r=e.readInt32BE(n);n+=4,(0,o.default)(r>=0,"RSocketBinaryFraming: Invalid frame, expected a positive stream id, got `%s.",r);const d=e.readUInt16BE(n);n+=2;const f=d>>>c.FRAME_TYPE_OFFFSET,S=d&c.FLAGS_MASK;switch(f){case c.FRAME_TYPES.SETUP:return function(e,t,n,r){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid SETUP frame, expected stream id to be 0.");const E=e.length;let l=_;const d=e.readUInt16BE(l);l+=2;const f=e.readUInt16BE(l);l+=2;const S=e.readInt32BE(l);l+=4,(0,o.default)(S>=0&&S<=c.MAX_KEEPALIVE,"RSocketBinaryFraming: Invalid SETUP frame, expected keepAlive to be >= 0 and <= %s. Got `%s`.",c.MAX_KEEPALIVE,S);const A=e.readInt32BE(l);l+=4,(0,o.default)(A>=0&&A<=c.MAX_LIFETIME,"RSocketBinaryFraming: Invalid SETUP frame, expected lifetime to be >= 0 and <= %s. Got `%s`.",c.MAX_LIFETIME,A);let m=null;if(n&c.FLAGS.RESUME_ENABLE){const t=e.readInt16BE(l);l+=2,(0,o.default)(t>=0&&t<=c.MAX_RESUME_LENGTH,"RSocketBinaryFraming: Invalid SETUP frame, expected resumeToken length to be >= 0 and <= %s. Got `%s`.",c.MAX_RESUME_LENGTH,t),m=r.resumeToken.decode(e,l,l+t),l+=t}const T=e.readUInt8(l);l+=1;const h=r.metadataMimeType.decode(e,l,l+T);l+=T;const R=e.readUInt8(l);l+=1;const P=r.dataMimeType.decode(e,l,l+R);l+=R;const O={data:null,dataMimeType:P,flags:n,keepAlive:S,length:E,lifetime:A,majorVersion:d,metadata:null,metadataMimeType:h,minorVersion:f,resumeToken:m,streamId:t,type:c.FRAME_TYPES.SETUP};return F(e,O,r,l),O}(e,r,S,t);case c.FRAME_TYPES.PAYLOAD:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid PAYLOAD frame, expected stream id to be > 0.");const E=e.length,l={data:null,flags:n,length:E,metadata:null,streamId:t,type:c.FRAME_TYPES.PAYLOAD};return F(e,l,r,_),l}(e,r,S,t);case c.FRAME_TYPES.ERROR:return function(e,t,n,r){const E=e.length;let l=_;const code=e.readInt32BE(l);l+=4,(0,o.default)(code>=0&&code<=c.MAX_CODE,"RSocketBinaryFraming: Invalid ERROR frame, expected code to be >= 0 and <= %s. Got `%s`.",c.MAX_CODE,code);const d=e.length-l;let f="";d>0&&(f=r.message.decode(e,l,l+d),l+=d);return{code:code,flags:n,length:E,message:f,streamId:t,type:c.FRAME_TYPES.ERROR}}(e,r,S,t);case c.FRAME_TYPES.KEEPALIVE:return function(e,t,n,r){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid KEEPALIVE frame, expected stream id to be 0.");const E=e.length;let d=_;const f=(0,l.readUInt64BE)(e,d);d+=8;let data=null;d<e.length&&(data=r.data.decode(e,d,e.length));return{data:data,flags:n,lastReceivedPosition:f,length:E,streamId:t,type:c.FRAME_TYPES.KEEPALIVE}}(e,r,S,t);case c.FRAME_TYPES.REQUEST_FNF:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_FNF frame, expected stream id to be > 0.");const E=e.length,l={data:null,flags:n,length:E,metadata:null,streamId:t,type:c.FRAME_TYPES.REQUEST_FNF};return F(e,l,r,_),l}(e,r,S,t);case c.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_RESPONSE frame, expected stream id to be > 0.");const E=e.length,l={data:null,flags:n,length:E,metadata:null,streamId:t,type:c.FRAME_TYPES.REQUEST_RESPONSE};return F(e,l,r,_),l}(e,r,S,t);case c.FRAME_TYPES.REQUEST_STREAM:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected stream id to be > 0.");const E=e.length;let l=_;const d=e.readInt32BE(l);l+=4,(0,o.default)(d>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",d);const f={data:null,flags:n,length:E,metadata:null,requestN:d,streamId:t,type:c.FRAME_TYPES.REQUEST_STREAM};return F(e,f,r,l),f}(e,r,S,t);case c.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_CHANNEL frame, expected stream id to be > 0.");const E=e.length;let l=_;const d=e.readInt32BE(l);l+=4,(0,o.default)(d>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",d);const f={data:null,flags:n,length:E,metadata:null,requestN:d,streamId:t,type:c.FRAME_TYPES.REQUEST_CHANNEL};return F(e,f,r,l),f}(e,r,S,t);case c.FRAME_TYPES.METADATA_PUSH:return function(e,t,n,r){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid METADATA_PUSH frame, expected stream id to be 0.");const E=e.length;return{flags:n,length:E,metadata:E===_?null:r.metadata.decode(e,_,E),streamId:t,type:c.FRAME_TYPES.METADATA_PUSH}}(e,r,S,t);case c.FRAME_TYPES.REQUEST_N:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_N frame, expected stream id to be > 0.");const E=e.length,l=e.readInt32BE(_);return(0,o.default)(l>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",l),{flags:n,length:E,requestN:l,streamId:t,type:c.FRAME_TYPES.REQUEST_N}}(e,r,S);case c.FRAME_TYPES.RESUME:return function(e,t,n,r){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid RESUME frame, expected stream id to be 0.");const E=e.length;let d=_;const f=e.readUInt16BE(d);d+=2;const S=e.readUInt16BE(d);d+=2;const A=e.readInt16BE(d);d+=2,(0,o.default)(A>=0&&A<=c.MAX_RESUME_LENGTH,"RSocketBinaryFraming: Invalid SETUP frame, expected resumeToken length to be >= 0 and <= %s. Got `%s`.",c.MAX_RESUME_LENGTH,A);const m=r.resumeToken.decode(e,d,d+A);d+=A;const T=(0,l.readUInt64BE)(e,d);d+=8;const h=(0,l.readUInt64BE)(e,d);return d+=8,{clientPosition:h,flags:n,length:E,majorVersion:f,minorVersion:S,resumeToken:m,serverPosition:T,streamId:t,type:c.FRAME_TYPES.RESUME}}(e,r,S,t);case c.FRAME_TYPES.RESUME_OK:return function(e,t,n,r){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid RESUME frame, expected stream id to be 0.");const E=e.length,d=(0,l.readUInt64BE)(e,_);return{clientPosition:d,flags:n,length:E,streamId:t,type:c.FRAME_TYPES.RESUME_OK}}(e,r,S);case c.FRAME_TYPES.CANCEL:return function(e,t,n,r){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid CANCEL frame, expected stream id to be > 0.");const E=e.length;return{flags:n,length:E,streamId:t,type:c.FRAME_TYPES.CANCEL}}(e,r,S);case c.FRAME_TYPES.LEASE:return function(e,t,n,r){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid LEASE frame, expected stream id to be 0.");const E=e.length;let l=_;const d=e.readUInt32BE(l);l+=4;const f=e.readUInt32BE(l);l+=4;let S=null;l<e.length&&(S=r.metadata.decode(e,l,e.length));return{flags:n,length:E,metadata:S,requestCount:f,streamId:t,ttl:d,type:c.FRAME_TYPES.LEASE}}(e,r,S,t);default:(0,o.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,c.getFrameTypeName)(f))}}function S(e,t){switch(t=t||E.Utf8Encoders,e.type){case c.FRAME_TYPES.SETUP:return function(e,t){const n=null!=e.resumeToken?t.resumeToken.byteLength(e.resumeToken):0,r=null!=e.metadataMimeType?t.metadataMimeType.byteLength(e.metadataMimeType):0,o=null!=e.dataMimeType?t.dataMimeType.byteLength(e.dataMimeType):0,E=y(e,t),d=(0,l.createBuffer)(_+A+(n?m+n:0)+r+o+E);let f=N(e,d);f=d.writeUInt16BE(e.majorVersion,f),f=d.writeUInt16BE(e.minorVersion,f),f=d.writeUInt32BE(e.keepAlive,f),f=d.writeUInt32BE(e.lifetime,f),e.flags&c.FLAGS.RESUME_ENABLE&&(f=d.writeUInt16BE(n,f),null!=e.resumeToken&&(f=t.resumeToken.encode(e.resumeToken,d,f,f+n)));f=d.writeUInt8(r,f),null!=e.metadataMimeType&&(f=t.metadataMimeType.encode(e.metadataMimeType,d,f,f+r));f=d.writeUInt8(o,f),null!=e.dataMimeType&&(f=t.dataMimeType.encode(e.dataMimeType,d,f,f+o));return C(e,d,t,f),d}(e,t);case c.FRAME_TYPES.PAYLOAD:return function(e,t){const n=y(e,t),r=(0,l.createBuffer)(_+n),o=N(e,r);return C(e,r,t,o),r}(e,t);case c.FRAME_TYPES.ERROR:return function(e,t){const n=null!=e.message?t.message.byteLength(e.message):0,r=(0,l.createBuffer)(_+T+n);let o=N(e,r);o=r.writeUInt32BE(e.code,o),null!=e.message&&t.message.encode(e.message,r,o,o+n);return r}(e,t);case c.FRAME_TYPES.KEEPALIVE:return function(e,t){const n=null!=e.data?t.data.byteLength(e.data):0,r=(0,l.createBuffer)(_+h+n);let o=N(e,r);o=(0,l.writeUInt64BE)(r,e.lastReceivedPosition,o),null!=e.data&&t.data.encode(e.data,r,o,o+n);return r}(e,t);case c.FRAME_TYPES.REQUEST_FNF:case c.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t){const n=y(e,t),r=(0,l.createBuffer)(_+n),o=N(e,r);return C(e,r,t,o),r}(e,t);case c.FRAME_TYPES.REQUEST_STREAM:case c.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t){const n=y(e,t),r=(0,l.createBuffer)(_+P+n);let o=N(e,r);return o=r.writeUInt32BE(e.requestN,o),C(e,r,t,o),r}(e,t);case c.FRAME_TYPES.METADATA_PUSH:return function(e,t){const n=e.metadata;if(null!=n){const r=(0,l.createBuffer)(_+t.metadata.byteLength(n)),o=N(e,r);return t.metadata.encode(n,r,o,r.length),r}{const t=(0,l.createBuffer)(_);return N(e,t),t}}(e,t);case c.FRAME_TYPES.REQUEST_N:return function(e,t){const n=(0,l.createBuffer)(_+O),r=N(e,n);return n.writeUInt32BE(e.requestN,r),n}(e);case c.FRAME_TYPES.RESUME:return function(e,t){const n=t.resumeToken.byteLength(e.resumeToken),r=(0,l.createBuffer)(_+M+n);let o=N(e,r);return o=r.writeUInt16BE(e.majorVersion,o),o=r.writeUInt16BE(e.minorVersion,o),o=r.writeUInt16BE(n,o),o=t.resumeToken.encode(e.resumeToken,r,o,o+n),o=(0,l.writeUInt64BE)(r,e.serverPosition,o),(0,l.writeUInt64BE)(r,e.clientPosition,o),r}(e,t);case c.FRAME_TYPES.RESUME_OK:return function(e,t){const n=(0,l.createBuffer)(_+I),r=N(e,n);return(0,l.writeUInt64BE)(n,e.clientPosition,r),n}(e);case c.FRAME_TYPES.CANCEL:return function(e,t){const n=(0,l.createBuffer)(_);return N(e,n),n}(e);case c.FRAME_TYPES.LEASE:return function(e,t){const n=null!=e.metadata?t.metadata.byteLength(e.metadata):0,r=(0,l.createBuffer)(_+R+n);let o=N(e,r);o=r.writeUInt32BE(e.ttl,o),o=r.writeUInt32BE(e.requestCount,o),null!=e.metadata&&t.metadata.encode(e.metadata,r,o,o+n);return r}(e,t);default:(0,o.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,c.getFrameTypeName)(e.type))}}const A=14,m=2;const T=4;const h=8;const R=8;const P=4;const O=4;const M=22;const I=8;function N(e,t){const n=t.writeInt32BE(e.streamId,0);return t.writeUInt16BE(e.type<<c.FRAME_TYPE_OFFFSET|e.flags&c.FLAGS_MASK,n)}function y(e,t){let n=0;return null!=e.data&&(n+=t.data.byteLength(e.data)),(0,c.isMetadata)(e.flags)&&(n+=d,null!=e.metadata&&(n+=t.metadata.byteLength(e.metadata))),n}function C(e,t,n,r){if((0,c.isMetadata)(e.flags))if(null!=e.metadata){const o=n.metadata.byteLength(e.metadata);r=(0,l.writeUInt24BE)(t,o,r),r=n.metadata.encode(e.metadata,t,r,r+o)}else r=(0,l.writeUInt24BE)(t,0,r);null!=e.data&&n.data.encode(e.data,t,r,t.length)}function F(e,t,n,r){if((0,c.isMetadata)(t.flags)){const o=(0,l.readUInt24BE)(e,r);r+=d,o>0&&(t.metadata=n.metadata.decode(e,r,r+o),r+=o)}r<e.length&&(t.data=n.data.decode(e,r,e.length))}},455:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferEncoders=t.Utf8Encoders=t.BufferEncoder=t.UTF8Encoder=void 0;var r,o=n(174),c=(r=n(155))&&r.__esModule?r:{default:r};const E={byteLength:e=>(0,o.byteLength)(e,"utf8"),decode:(e,t,n)=>e.toString("utf8",t,n),encode:(e,t,n,r)=>((0,c.default)("string"==typeof e,"RSocketEncoding: Expected value to be a string, got `%s`.",e),t.write(e,n,r-n,"utf8"),r)};t.UTF8Encoder=E;const l={byteLength:t=>((0,c.default)(e.isBuffer(t),"RSocketEncoding: Expected value to be a buffer, got `%s`.",t),t.length),decode:(e,t,n)=>e.slice(t,n),encode:(t,n,r,o)=>((0,c.default)(e.isBuffer(t),"RSocketEncoding: Expected value to be a buffer, got `%s`.",t),t.copy(n,r,0,t.length),o)};t.BufferEncoder=l;const _={data:E,dataMimeType:E,message:E,metadata:E,metadataMimeType:E,resumeToken:E};t.Utf8Encoders=_;const d={data:l,dataMimeType:E,message:E,metadata:l,metadataMimeType:E,resumeToken:l};t.BufferEncoders=d}).call(this,n(451).Buffer)},456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_BY_MIME_STRING=t.TYPES_BY_MIME_ID=t.MESSAGE_RSOCKET_COMPOSITE_METADATA=t.MESSAGE_RSOCKET_ROUTING=t.MESSAGE_RSOCKET_TRACING_ZIPKIN=t.MESSAGE_RSOCKET_AUTHENTICATION=t.MESSAGE_RSOCKET_ACCEPT_MIMETYPES=t.MESSAGE_RSOCKET_MIMETYPE=t.APPLICATION_CLOUDEVENTS_JSON=t.APPLICATION_JAVA_OBJECT=t.APPLICATION_HESSIAN=t.VIDEO_VP8=t.VIDEO_H265=t.VIDEO_H264=t.TEXT_XML=t.TEXT_PLAIN=t.TEXT_HTML=t.TEXT_CSV=t.TEXT_CSS=t.MULTIPART_MIXED=t.IMAGE_TIFF=t.IMAGE_PNG=t.IMAGE_JPEG=t.IMAGE_HEIF=t.IMAGE_HEIF_SEQUENCE=t.IMAGE_HEIC=t.IMAGE_HEIC_SEQUENCE=t.IMAGE_GIG=t.IMAGE_BMP=t.AUDIO_VORBIS=t.AUDIO_OPUS=t.AUDIO_OGG=t.AUDIO_MPEG=t.AUDIO_MPEG3=t.AUDIO_MP4=t.AUDIO_MP3=t.AUDIO_AAC=t.APPLICATION_ZIP=t.APPLICATION_XML=t.APPLICATION_PROTOBUF=t.APPLICATION_THRIFT=t.APPLICATION_PDF=t.APPLICATION_OCTET_STREAM=t.APPLICATION_JSON=t.APPLICATION_JAVASCRIPT=t.APPLICATION_GZIP=t.APPLICATION_GRAPHQL=t.APPLICATION_CBOR=t.APPLICATION_AVRO=t.UNKNOWN_RESERVED_MIME_TYPE=t.UNPARSEABLE_MIME_TYPE=t.default=void 0;class r{constructor(e,t){this._string=e,this._identifier=t}static fromIdentifier(e){return e<0||e>127?o:oe[e]}static fromString(e){if(!e)throw new Error("type must be non-null");return e===c.string?o:ce.get(e)||o}get identifier(){return this._identifier}get string(){return this._string}toString(){return this._string}}t.default=r;const o=new r("UNPARSEABLE_MIME_TYPE_DO_NOT_USE",-2);t.UNPARSEABLE_MIME_TYPE=o;const c=new r("UNKNOWN_YET_RESERVED_DO_NOT_USE",-1);t.UNKNOWN_RESERVED_MIME_TYPE=c;const E=new r("application/avro",0);t.APPLICATION_AVRO=E;const l=new r("application/cbor",1);t.APPLICATION_CBOR=l;const _=new r("application/graphql",2);t.APPLICATION_GRAPHQL=_;const d=new r("application/gzip",3);t.APPLICATION_GZIP=d;const f=new r("application/javascript",4);t.APPLICATION_JAVASCRIPT=f;const S=new r("application/json",5);t.APPLICATION_JSON=S;const A=new r("application/octet-stream",6);t.APPLICATION_OCTET_STREAM=A;const m=new r("application/pdf",7);t.APPLICATION_PDF=m;const T=new r("application/vnd.apache.thrift.binary",8);t.APPLICATION_THRIFT=T;const h=new r("application/vnd.google.protobuf",9);t.APPLICATION_PROTOBUF=h;const R=new r("application/xml",10);t.APPLICATION_XML=R;const P=new r("application/zip",11);t.APPLICATION_ZIP=P;const O=new r("audio/aac",12);t.AUDIO_AAC=O;const M=new r("audio/mp3",13);t.AUDIO_MP3=M;const I=new r("audio/mp4",14);t.AUDIO_MP4=I;const N=new r("audio/mpeg3",15);t.AUDIO_MPEG3=N;const y=new r("audio/mpeg",16);t.AUDIO_MPEG=y;const C=new r("audio/ogg",17);t.AUDIO_OGG=C;const F=new r("audio/opus",18);t.AUDIO_OPUS=F;const L=new r("audio/vorbis",19);t.AUDIO_VORBIS=L;const U=new r("image/bmp",20);t.IMAGE_BMP=U;const w=new r("image/gif",21);t.IMAGE_GIG=w;const v=new r("image/heic-sequence",22);t.IMAGE_HEIC_SEQUENCE=v;const D=new r("image/heic",23);t.IMAGE_HEIC=D;const j=new r("image/heif-sequence",24);t.IMAGE_HEIF_SEQUENCE=j;const B=new r("image/heif",25);t.IMAGE_HEIF=B;const Y=new r("image/jpeg",26);t.IMAGE_JPEG=Y;const G=new r("image/png",27);t.IMAGE_PNG=G;const k=new r("image/tiff",28);t.IMAGE_TIFF=k;const H=new r("multipart/mixed",29);t.MULTIPART_MIXED=H;const x=new r("text/css",30);t.TEXT_CSS=x;const X=new r("text/csv",31);t.TEXT_CSV=X;const z=new r("text/html",32);t.TEXT_HTML=z;const V=new r("text/plain",33);t.TEXT_PLAIN=V;const Q=new r("text/xml",34);t.TEXT_XML=Q;const K=new r("video/H264",35);t.VIDEO_H264=K;const J=new r("video/H265",36);t.VIDEO_H265=J;const W=new r("video/VP8",37);t.VIDEO_VP8=W;const Z=new r("application/x-hessian",38);t.APPLICATION_HESSIAN=Z;const $=new r("application/x-java-object",39);t.APPLICATION_JAVA_OBJECT=$;const ee=new r("application/cloudevents+json",40);t.APPLICATION_CLOUDEVENTS_JSON=ee;const te=new r("message/x.rsocket.mime-type.v0",122);t.MESSAGE_RSOCKET_MIMETYPE=te;const ne=new r("message/x.rsocket.accept-mime-types.v0",123);t.MESSAGE_RSOCKET_ACCEPT_MIMETYPES=ne;const re=new r("message/x.rsocket.authentication.v0",124);t.MESSAGE_RSOCKET_AUTHENTICATION=re;const se=new r("message/x.rsocket.tracing-zipkin.v0",125);t.MESSAGE_RSOCKET_TRACING_ZIPKIN=se;const ie=new r("message/x.rsocket.routing.v0",126);t.MESSAGE_RSOCKET_ROUTING=ie;const ae=new r("message/x.rsocket.composite-metadata.v0",127);t.MESSAGE_RSOCKET_COMPOSITE_METADATA=ae;const oe=new Array(128);t.TYPES_BY_MIME_ID=oe;const ce=new Map;t.TYPES_BY_MIME_STRING=ce;const ue=[o,c,E,l,_,d,f,S,A,m,T,h,R,P,O,M,I,N,y,C,F,L,U,w,v,D,j,B,Y,G,k,H,x,X,z,V,Q,K,J,W,Z,$,ee,te,ne,re,se,ie,ae];oe.fill(c);for(const e of ue)e.identifier>=0&&(oe[e.identifier]=e,ce.set(e.string,e));Object.seal&&Object.seal(oe)},457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_BY_AUTH_STRING=t.TYPES_BY_AUTH_ID=t.BEARER=t.SIMPLE=t.UNKNOWN_RESERVED_AUTH_TYPE=t.UNPARSEABLE_AUTH_TYPE=t.default=void 0;class r{constructor(e,t){this._string=e,this._identifier=t}static fromIdentifier(e){return e<0||e>127?o:_[e]}static fromString(e){if(!e)throw new Error("type must be non-null");return e===c.string?o:d.get(e)||o}get identifier(){return this._identifier}get string(){return this._string}toString(){return this._string}}t.default=r;const o=new r("UNPARSEABLE_AUTH_TYPE_DO_NOT_USE",-2);t.UNPARSEABLE_AUTH_TYPE=o;const c=new r("UNKNOWN_YET_RESERVED_DO_NOT_USE",-1);t.UNKNOWN_RESERVED_AUTH_TYPE=c;const E=new r("simple",0);t.SIMPLE=E;const l=new r("bearer",1);t.BEARER=l;const _=new Array(128);t.TYPES_BY_AUTH_ID=_;const d=new Map;t.TYPES_BY_AUTH_STRING=d;const f=[o,c,E,l];_.fill(c);for(const e of f)e.identifier>=0&&(_[e.identifier]=e,d.set(e.string,e));Object.seal&&Object.seal(_)},845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(154),c=(r=n(155))&&r.__esModule?r:{default:r},E=n(137),l=n(852),_=n(450),d=n(239),f=n(238),S=n(452);t.default=class{constructor(e){this._checkConfig(e),this._cancel=null,this._config=e,this._connection=null,this._socket=null}close(){this._config.transport.close()}connect(){return(0,c.default)(!this._connection,"RSocketClient: Unexpected call to connect(), already connected."),this._connection=new o.Single((e=>{const t=this._config.transport;let n;t.connectionStatus().subscribe({onNext:r=>{"CONNECTED"===r.kind?(n&&n.cancel(),e.onComplete(new A(this._config,new S.ReassemblyDuplexConnection(t)))):"ERROR"===r.kind?(n&&n.cancel(),e.onError(r.error)):"CLOSED"===r.kind&&(n&&n.cancel(),e.onError(new Error("RSocketClient: Connection closed.")))},onSubscribe:r=>{n=r,e.onSubscribe((()=>{r.cancel(),t.close()})),n.request(Number.MAX_SAFE_INTEGER)}}),t.connect()})),this._connection}_checkConfig(e){const t=e.setup,n=t&&t.keepAlive;try{const e=window&&window.navigator;n>3e4&&e&&e.userAgent&&(e.userAgent.includes("Trident")||e.userAgent.includes("Edg"))&&console.warn("rsocket-js: Due to a browser bug, Internet Explorer and Edge users may experience WebSocket instability with keepAlive values longer than 30 seconds.")}catch(e){}}};class A{constructor(e,t){let n,r;const c=e.leases;if(c){const e=c();n=new d.RequesterLeaseHandler(e._receiver),r=new d.ResponderLeaseHandler(e._sender,e._stats)}const{keepAlive:l,lifetime:f}=e.setup;this._machine=(0,_.createClientMachine)(t,(e=>t.receive().subscribe(e)),f,e.serializers,e.responder,e.errorHandler,n,r),t.sendOne(this._buildSetupFrame(e));const S=(0,o.every)(l).map((()=>({data:null,flags:E.FLAGS.RESPOND,lastReceivedPosition:0,streamId:E.CONNECTION_STREAM_ID,type:E.FRAME_TYPES.KEEPALIVE})));t.send(S)}fireAndForget(e){this._machine.fireAndForget(e)}requestResponse(e){return this._machine.requestResponse(e)}requestStream(e){return this._machine.requestStream(e)}requestChannel(e){return this._machine.requestChannel(e)}metadataPush(e){return this._machine.metadataPush(e)}close(){this._machine.close()}connectionStatus(){return this._machine.connectionStatus()}availability(){return this._machine.availability()}_buildSetupFrame(e){const{dataMimeType:t,keepAlive:n,lifetime:r,metadataMimeType:o,payload:c}=e.setup,_=e.serializers||f.IdentitySerializers,data=c?_.data.serialize(c.data):void 0,d=c?_.metadata.serialize(c.metadata):void 0;let S=0;return void 0!==d&&(S|=E.FLAGS.METADATA),{data:data,dataMimeType:t,flags:S|(e.leases?E.FLAGS.LEASE:0),keepAlive:n,lifetime:r,majorVersion:l.MAJOR_VERSION,metadata:d,metadataMimeType:o,minorVersion:l.MINOR_VERSION,resumeToken:null,streamId:E.CONNECTION_STREAM_ID,type:E.FRAME_TYPES.SETUP}}}},852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_VERSION=t.MAJOR_VERSION=void 0;t.MAJOR_VERSION=1;t.MINOR_VERSION=0},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(154);var r,o=(r=n(155))&&r.__esModule?r:{default:r},c=n(137),E=n(238),l=n(450),_=n(239),d=n(452);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=class{constructor(e){f(this,"_handleTransportComplete",(()=>{this._handleTransportError(new Error("RSocketServer: Connection closed unexpectedly."))})),f(this,"_handleTransportError",(e=>{this._connections.forEach((e=>{e.close()}))})),f(this,"_handleTransportConnection",(e=>{const t=new S;let n;(e=new d.ReassemblyDuplexConnection(e)).receive().subscribe(t.swap({onError:e=>console.error(e),onNext:n=>{switch(n.type){case c.FRAME_TYPES.RESUME:e.sendOne({code:c.ERROR_CODES.REJECTED_RESUME,flags:0,message:"RSocketServer: RESUME not supported.",streamId:c.CONNECTION_STREAM_ID,type:c.FRAME_TYPES.ERROR}),e.close();break;case c.FRAME_TYPES.SETUP:if(this._setupLeaseError(n)){e.sendOne({code:c.ERROR_CODES.INVALID_SETUP,flags:0,message:"RSocketServer: LEASE not supported.",streamId:c.CONNECTION_STREAM_ID,type:c.FRAME_TYPES.ERROR}),e.close();break}const r=this._getSerializers();let E,d;const f=this._config.leases;if(f){const e=f();E=new _.RequesterLeaseHandler(e._receiver),d=new _.ResponderLeaseHandler(e._sender,e._stats)}const S=(0,l.createServerMachine)(e,(e=>{t.swap(e)}),n.lifetime,r,this._config.errorHandler,E,d);try{const t=this._config.getRequestHandler(S,function(e,t){return{data:e.data.deserialize(t.data),metadata:e.metadata.deserialize(t.metadata)}}(r,n));S.setRequestHandler(t),this._connections.add(S),e.connectionStatus().subscribe({onNext:e=>{"CLOSED"!==e.kind&&"ERROR"!==e.kind||this._connections.delete(S)},onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)})}catch(t){e.sendOne({code:c.ERROR_CODES.REJECTED_SETUP,flags:0,message:"Application rejected setup, reason: "+t.message,streamId:c.CONNECTION_STREAM_ID,type:c.FRAME_TYPES.ERROR}),e.close()}break;default:(0,o.default)(!1,"RSocketServer: Expected first frame to be SETUP or RESUME, got `%s`.",(0,c.getFrameTypeName)(n.type))}},onSubscribe:e=>{n=e,n.request(1)}}))})),this._config=e,this._connections=new Set,this._started=!1,this._subscription=null}start(){(0,o.default)(!this._started,"RSocketServer: Unexpected call to start(), already started."),this._started=!0,this._config.transport.start().subscribe({onComplete:this._handleTransportComplete,onError:this._handleTransportError,onNext:this._handleTransportConnection,onSubscribe:e=>{this._subscription=e,e.request(Number.MAX_SAFE_INTEGER)}})}stop(){this._subscription&&this._subscription.cancel(),this._config.transport.stop(),this._handleTransportError(new Error("RSocketServer: Connection terminated via stop()."))}_getSerializers(){return this._config.serializers||E.IdentitySerializers}_setupLeaseError(e){const t=(e.flags&c.FLAGS.LEASE)===c.FLAGS.LEASE,n=this._config.leases;return t&&!n}};class S{constructor(e){this._target=e}swap(e){return this._target=e,this._subscription&&this._target.onSubscribe&&this._target.onSubscribe(this._subscription),this}onComplete(){(0,o.default)(this._target,"must have target"),this._target.onComplete&&this._target.onComplete()}onError(e){(0,o.default)(this._target,"must have target"),this._target.onError&&this._target.onError(e)}onNext(e){(0,o.default)(this._target,"must have target"),this._target.onNext&&this._target.onNext(e)}onSubscribe(e){(0,o.default)(this._target,"must have target"),this._subscription=e,this._target.onSubscribe&&this._target.onSubscribe(e)}}},857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(154),c=(r=n(155))&&r.__esModule?r:{default:r},E=n(137),l=n(453),_=n(454);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){S(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=class{constructor(source,e,t){(0,c.default)(e.bufferSize>=0,"RSocketResumableTransport: bufferSize option must be >= 0, got `%s`.",e.bufferSize),this._encoders=t,this._bufferSize=e.bufferSize,this._sentFramesSize=0,this._position={client:0,server:0},this._currentConnection=null,this._statusSubscription=null,this._receiveSubscription=null,this._receivers=new Set,this._resumeToken=e.resumeToken,this._sessionTimeoutMillis=1e3*e.sessionDurationSeconds,this._sessionTimeoutHandle=null,this._senders=new Set,this._sentFrames=[],this._setupFrame=null,this._source=source,this._status=l.CONNECTION_STATUS.NOT_CONNECTED,this._statusSubscribers=new Set}close(){this._close()}connect(){(0,c.default)(!this._isTerminated(),"RSocketResumableTransport: Cannot connect(), connection terminated (%s: %s).",this._status.kind,"ERROR"===this._status.kind?this._status.error.message:"no message");try{this._disconnect(),this._currentConnection=null,this._receiveSubscription=null,this._statusSubscription=null,this._setConnectionStatus(l.CONNECTION_STATUS.CONNECTING);const e=this._source();e.connectionStatus().subscribe({onNext:t=>{t.kind!==this._status.kind&&("CONNECTED"===t.kind?(this._sessionTimeoutHandle&&(clearTimeout(this._sessionTimeoutHandle),this._sessionTimeoutHandle=null),null==this._setupFrame?this._handleConnected(e):this._handleResume(e)):this._isTerminationStatus(t)&&(this._sessionTimeoutHandle||(this._sessionTimeoutHandle=setTimeout((()=>this._close(this._resumeTimeoutError())),this._sessionTimeoutMillis)),this._disconnect(),this._setConnectionStatus(l.CONNECTION_STATUS.NOT_CONNECTED)))},onSubscribe:e=>{this._statusSubscription=e,e.request(Number.MAX_SAFE_INTEGER)}}),e.connect()}catch(e){this._close(e)}}connectionStatus(){return new o.Flowable((e=>{e.onSubscribe({cancel:()=>{this._statusSubscribers.delete(e)},request:()=>{this._statusSubscribers.add(e),e.onNext(this._status)}})}))}receive(){return new o.Flowable((e=>{let t=!1;e.onSubscribe({cancel:()=>{this._receivers.delete(e)},request:()=>{t||(t=!0,this._receivers.add(e))}})}))}sendOne(e){try{this._writeFrame(e)}catch(e){this._close(e)}}send(e){let t;e.subscribe({onComplete:()=>{t&&this._senders.delete(t)},onError:e=>{t&&this._senders.delete(t),this._close(e)},onNext:e=>this._writeFrame(e),onSubscribe:e=>{t=e,this._senders.add(t),t.request(Number.MAX_SAFE_INTEGER)}})}_close(e){if(this._isTerminated())return;e?this._setConnectionStatus({error:e,kind:"ERROR"}):this._setConnectionStatus(l.CONNECTION_STATUS.CLOSED);const t=this._receivers;t.forEach((e=>e.onComplete())),t.clear();const n=this._senders;n.forEach((s=>s.cancel())),n.clear(),this._sentFrames.length=0,this._disconnect()}_disconnect(){this._statusSubscription&&(this._statusSubscription.cancel(),this._statusSubscription=null),this._receiveSubscription&&(this._receiveSubscription.cancel(),this._receiveSubscription=null),this._currentConnection&&(this._currentConnection.close(),this._currentConnection=null)}_handleConnected(e){this._currentConnection=e,this._flushFrames(),this._setConnectionStatus(l.CONNECTION_STATUS.CONNECTED),e.receive().subscribe({onNext:e=>{try{this._receiveFrame(e)}catch(e){this._close(e)}},onSubscribe:e=>{this._receiveSubscription=e,e.request(Number.MAX_SAFE_INTEGER)}})}_handleResume(e){e.receive().take(1).subscribe({onNext:t=>{try{if(t.type===E.FRAME_TYPES.RESUME_OK){const{clientPosition:n}=t;if(n<this._position.client)return void this._close(this._nonResumableStateError());let r=n-this._position.client,o=0;for(;r>0;){const e=this._onReleasedTailFrame(this._sentFrames[o]);if(!e)return void this._close(this._absentLengthError(t));r-=e,o++}if(0!==r)return void this._close(this._inconsistentImpliedPositionError());o>0&&this._sentFrames.splice(0,o),this._handleConnected(e)}else{const e=t.type===E.FRAME_TYPES.ERROR?(0,E.createErrorFromFrame)(t):new Error("RSocketResumableTransport: Resumption failed for an unspecified reason.");this._close(e)}}catch(e){this._close(e)}},onSubscribe:e=>{this._receiveSubscription=e,e.request(1)}});const t=this._setupFrame;(0,c.default)(t,"RSocketResumableTransport: Cannot resume, setup frame has not been sent."),e.sendOne({clientPosition:this._position.client,flags:0,majorVersion:t.majorVersion,minorVersion:t.minorVersion,resumeToken:this._resumeToken,serverPosition:this._position.server,streamId:E.CONNECTION_STREAM_ID,type:E.FRAME_TYPES.RESUME})}_absentLengthError(e){return new Error("RSocketResumableTransport: absent frame.length for type "+e.type)}_inconsistentImpliedPositionError(){return new Error("RSocketResumableTransport: local frames are inconsistent with remote implied position")}_nonResumableStateError(){return new Error("RSocketResumableTransport: resumption failed, server is missing frames that are no longer in the client buffer.")}_resumeTimeoutError(){return new Error("RSocketResumableTransport: resumable session timed out")}_isTerminated(){return this._isTerminationStatus(this._status)}_isTerminationStatus(e){const t=e.kind;return"CLOSED"===t||"ERROR"===t}_setConnectionStatus(e){e.kind!==this._status.kind&&(this._status=e,this._statusSubscribers.forEach((t=>t.onNext(e))))}_receiveFrame(e){(0,E.isResumePositionFrameType)(e.type)&&e.length&&(this._position.server+=e.length),this._receivers.forEach((t=>t.onNext(e)))}_flushFrames(){this._sentFrames.forEach((e=>{const t=this._currentConnection;t&&t.sendOne(e)}))}_onReleasedTailFrame(e){const t=e.length;if(t)return this._sentFramesSize-=t,this._position.client+=t,t}_writeFrame(e){if(e.type===E.FRAME_TYPES.SETUP&&(e=f(f({},e),{},{flags:e.flags|E.FLAGS.RESUME_ENABLE,resumeToken:this._resumeToken}),this._setupFrame=e),e.length=(0,_.sizeOfFrame)(e,this._encoders),(0,E.isResumePositionFrameType)(e.type)){let t=this._bufferSize-this._sentFramesSize;const n=e.length;if(!n)return void this._close(this._absentLengthError(e));for(;t<n;){const n=this._sentFrames.shift();if(!n)break;{const r=this._onReleasedTailFrame(n);if(!r)return void this._close(this._absentLengthError(e));t+=r}}t>=n?(this._sentFrames.push(e),this._sentFramesSize+=n):this._position.client+=n}const t=this._currentConnection;t&&t.sendOne(e)}}},861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeRoutes=function(...e){if(e.length<1)throw new Error("routes should be non empty array");return r.LiteBuffer.concat(e.map((e=>E(e))))},t.encodeRoute=E,t.decodeRoutes=l,t.RoutingMetadata=void 0;var r=n(173),o=n(174);class c{constructor(e){this._buffer=e}iterator(){return l(this._buffer)}[Symbol.iterator](){return l(this._buffer)}}function E(e){const t=(0,o.toBuffer)(e,"utf8");if(t.length>255)throw new Error(`route length should fit into unsigned byte length but the given one is ${t.length}`);const n=(0,o.createBuffer)(1);return n.writeUInt8(t.length),r.LiteBuffer.concat([n,t])}function*l(e){const t=e.byteLength;let n=0;for(;n<t;){const r=e.readUInt8(n++);if(n+r>t)throw new Error(`Malformed RouteMetadata. Offset(${n}) + RouteLength(${r}) is greater than TotalLength`);const o=e.toString("utf8",n,n+r);n+=r,yield o}}t.RoutingMetadata=c},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RSocketClient",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"RSocketServer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"RSocketResumableTransport",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"WellKnownMimeType",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"UNPARSEABLE_MIME_TYPE",{enumerable:!0,get:function(){return E.UNPARSEABLE_MIME_TYPE}}),Object.defineProperty(t,"UNKNOWN_RESERVED_MIME_TYPE",{enumerable:!0,get:function(){return E.UNKNOWN_RESERVED_MIME_TYPE}}),Object.defineProperty(t,"APPLICATION_AVRO",{enumerable:!0,get:function(){return E.APPLICATION_AVRO}}),Object.defineProperty(t,"APPLICATION_CBOR",{enumerable:!0,get:function(){return E.APPLICATION_CBOR}}),Object.defineProperty(t,"APPLICATION_GRAPHQL",{enumerable:!0,get:function(){return E.APPLICATION_GRAPHQL}}),Object.defineProperty(t,"APPLICATION_GZIP",{enumerable:!0,get:function(){return E.APPLICATION_GZIP}}),Object.defineProperty(t,"APPLICATION_JAVASCRIPT",{enumerable:!0,get:function(){return E.APPLICATION_JAVASCRIPT}}),Object.defineProperty(t,"APPLICATION_JSON",{enumerable:!0,get:function(){return E.APPLICATION_JSON}}),Object.defineProperty(t,"APPLICATION_OCTET_STREAM",{enumerable:!0,get:function(){return E.APPLICATION_OCTET_STREAM}}),Object.defineProperty(t,"APPLICATION_PDF",{enumerable:!0,get:function(){return E.APPLICATION_PDF}}),Object.defineProperty(t,"APPLICATION_THRIFT",{enumerable:!0,get:function(){return E.APPLICATION_THRIFT}}),Object.defineProperty(t,"APPLICATION_PROTOBUF",{enumerable:!0,get:function(){return E.APPLICATION_PROTOBUF}}),Object.defineProperty(t,"APPLICATION_XML",{enumerable:!0,get:function(){return E.APPLICATION_XML}}),Object.defineProperty(t,"APPLICATION_ZIP",{enumerable:!0,get:function(){return E.APPLICATION_ZIP}}),Object.defineProperty(t,"AUDIO_AAC",{enumerable:!0,get:function(){return E.AUDIO_AAC}}),Object.defineProperty(t,"AUDIO_MP3",{enumerable:!0,get:function(){return E.AUDIO_MP3}}),Object.defineProperty(t,"AUDIO_MP4",{enumerable:!0,get:function(){return E.AUDIO_MP4}}),Object.defineProperty(t,"AUDIO_MPEG3",{enumerable:!0,get:function(){return E.AUDIO_MPEG3}}),Object.defineProperty(t,"AUDIO_MPEG",{enumerable:!0,get:function(){return E.AUDIO_MPEG}}),Object.defineProperty(t,"AUDIO_OGG",{enumerable:!0,get:function(){return E.AUDIO_OGG}}),Object.defineProperty(t,"AUDIO_OPUS",{enumerable:!0,get:function(){return E.AUDIO_OPUS}}),Object.defineProperty(t,"AUDIO_VORBIS",{enumerable:!0,get:function(){return E.AUDIO_VORBIS}}),Object.defineProperty(t,"IMAGE_BMP",{enumerable:!0,get:function(){return E.IMAGE_BMP}}),Object.defineProperty(t,"IMAGE_GIG",{enumerable:!0,get:function(){return E.IMAGE_GIG}}),Object.defineProperty(t,"IMAGE_HEIC_SEQUENCE",{enumerable:!0,get:function(){return E.IMAGE_HEIC_SEQUENCE}}),Object.defineProperty(t,"IMAGE_HEIC",{enumerable:!0,get:function(){return E.IMAGE_HEIC}}),Object.defineProperty(t,"IMAGE_HEIF_SEQUENCE",{enumerable:!0,get:function(){return E.IMAGE_HEIF_SEQUENCE}}),Object.defineProperty(t,"IMAGE_HEIF",{enumerable:!0,get:function(){return E.IMAGE_HEIF}}),Object.defineProperty(t,"IMAGE_JPEG",{enumerable:!0,get:function(){return E.IMAGE_JPEG}}),Object.defineProperty(t,"IMAGE_PNG",{enumerable:!0,get:function(){return E.IMAGE_PNG}}),Object.defineProperty(t,"IMAGE_TIFF",{enumerable:!0,get:function(){return E.IMAGE_TIFF}}),Object.defineProperty(t,"MULTIPART_MIXED",{enumerable:!0,get:function(){return E.MULTIPART_MIXED}}),Object.defineProperty(t,"TEXT_CSS",{enumerable:!0,get:function(){return E.TEXT_CSS}}),Object.defineProperty(t,"TEXT_CSV",{enumerable:!0,get:function(){return E.TEXT_CSV}}),Object.defineProperty(t,"TEXT_HTML",{enumerable:!0,get:function(){return E.TEXT_HTML}}),Object.defineProperty(t,"TEXT_PLAIN",{enumerable:!0,get:function(){return E.TEXT_PLAIN}}),Object.defineProperty(t,"TEXT_XML",{enumerable:!0,get:function(){return E.TEXT_XML}}),Object.defineProperty(t,"VIDEO_H264",{enumerable:!0,get:function(){return E.VIDEO_H264}}),Object.defineProperty(t,"VIDEO_H265",{enumerable:!0,get:function(){return E.VIDEO_H265}}),Object.defineProperty(t,"VIDEO_VP8",{enumerable:!0,get:function(){return E.VIDEO_VP8}}),Object.defineProperty(t,"APPLICATION_HESSIAN",{enumerable:!0,get:function(){return E.APPLICATION_HESSIAN}}),Object.defineProperty(t,"APPLICATION_JAVA_OBJECT",{enumerable:!0,get:function(){return E.APPLICATION_JAVA_OBJECT}}),Object.defineProperty(t,"APPLICATION_CLOUDEVENTS_JSON",{enumerable:!0,get:function(){return E.APPLICATION_CLOUDEVENTS_JSON}}),Object.defineProperty(t,"MESSAGE_RSOCKET_MIMETYPE",{enumerable:!0,get:function(){return E.MESSAGE_RSOCKET_MIMETYPE}}),Object.defineProperty(t,"MESSAGE_RSOCKET_ACCEPT_MIMETYPES",{enumerable:!0,get:function(){return E.MESSAGE_RSOCKET_ACCEPT_MIMETYPES}}),Object.defineProperty(t,"MESSAGE_RSOCKET_AUTHENTICATION",{enumerable:!0,get:function(){return E.MESSAGE_RSOCKET_AUTHENTICATION}}),Object.defineProperty(t,"MESSAGE_RSOCKET_TRACING_ZIPKIN",{enumerable:!0,get:function(){return E.MESSAGE_RSOCKET_TRACING_ZIPKIN}}),Object.defineProperty(t,"MESSAGE_RSOCKET_ROUTING",{enumerable:!0,get:function(){return E.MESSAGE_RSOCKET_ROUTING}}),Object.defineProperty(t,"MESSAGE_RSOCKET_COMPOSITE_METADATA",{enumerable:!0,get:function(){return E.MESSAGE_RSOCKET_COMPOSITE_METADATA}}),Object.defineProperty(t,"WellKnownAuthType",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"UNPARSEABLE_AUTH_TYPE",{enumerable:!0,get:function(){return l.UNPARSEABLE_AUTH_TYPE}}),Object.defineProperty(t,"UNKNOWN_RESERVED_AUTH_TYPE",{enumerable:!0,get:function(){return l.UNKNOWN_RESERVED_AUTH_TYPE}}),Object.defineProperty(t,"SIMPLE",{enumerable:!0,get:function(){return l.SIMPLE}}),Object.defineProperty(t,"BEARER",{enumerable:!0,get:function(){return l.BEARER}}),Object.defineProperty(t,"CONNECTION_STREAM_ID",{enumerable:!0,get:function(){return _.CONNECTION_STREAM_ID}}),Object.defineProperty(t,"ERROR_CODES",{enumerable:!0,get:function(){return _.ERROR_CODES}}),Object.defineProperty(t,"ERROR_EXPLANATIONS",{enumerable:!0,get:function(){return _.ERROR_EXPLANATIONS}}),Object.defineProperty(t,"FLAGS_MASK",{enumerable:!0,get:function(){return _.FLAGS_MASK}}),Object.defineProperty(t,"FLAGS",{enumerable:!0,get:function(){return _.FLAGS}}),Object.defineProperty(t,"FRAME_TYPE_OFFFSET",{enumerable:!0,get:function(){return _.FRAME_TYPE_OFFFSET}}),Object.defineProperty(t,"FRAME_TYPES",{enumerable:!0,get:function(){return _.FRAME_TYPES}}),Object.defineProperty(t,"MAX_CODE",{enumerable:!0,get:function(){return _.MAX_CODE}}),Object.defineProperty(t,"MAX_KEEPALIVE",{enumerable:!0,get:function(){return _.MAX_KEEPALIVE}}),Object.defineProperty(t,"MAX_LIFETIME",{enumerable:!0,get:function(){return _.MAX_LIFETIME}}),Object.defineProperty(t,"MAX_MIME_LENGTH",{enumerable:!0,get:function(){return _.MAX_MIME_LENGTH}}),Object.defineProperty(t,"MAX_RESUME_LENGTH",{enumerable:!0,get:function(){return _.MAX_RESUME_LENGTH}}),Object.defineProperty(t,"MAX_STREAM_ID",{enumerable:!0,get:function(){return _.MAX_STREAM_ID}}),Object.defineProperty(t,"MAX_VERSION",{enumerable:!0,get:function(){return _.MAX_VERSION}}),Object.defineProperty(t,"createErrorFromFrame",{enumerable:!0,get:function(){return _.createErrorFromFrame}}),Object.defineProperty(t,"getErrorCodeExplanation",{enumerable:!0,get:function(){return _.getErrorCodeExplanation}}),Object.defineProperty(t,"isComplete",{enumerable:!0,get:function(){return _.isComplete}}),Object.defineProperty(t,"isIgnore",{enumerable:!0,get:function(){return _.isIgnore}}),Object.defineProperty(t,"isLease",{enumerable:!0,get:function(){return _.isLease}}),Object.defineProperty(t,"isMetadata",{enumerable:!0,get:function(){return _.isMetadata}}),Object.defineProperty(t,"isNext",{enumerable:!0,get:function(){return _.isNext}}),Object.defineProperty(t,"isRespond",{enumerable:!0,get:function(){return _.isRespond}}),Object.defineProperty(t,"isResumeEnable",{enumerable:!0,get:function(){return _.isResumeEnable}}),Object.defineProperty(t,"printFrame",{enumerable:!0,get:function(){return _.printFrame}}),Object.defineProperty(t,"deserializeFrame",{enumerable:!0,get:function(){return d.deserializeFrame}}),Object.defineProperty(t,"deserializeFrameWithLength",{enumerable:!0,get:function(){return d.deserializeFrameWithLength}}),Object.defineProperty(t,"deserializeFrames",{enumerable:!0,get:function(){return d.deserializeFrames}}),Object.defineProperty(t,"serializeFrame",{enumerable:!0,get:function(){return d.serializeFrame}}),Object.defineProperty(t,"serializeFrameWithLength",{enumerable:!0,get:function(){return d.serializeFrameWithLength}}),Object.defineProperty(t,"byteLength",{enumerable:!0,get:function(){return f.byteLength}}),Object.defineProperty(t,"createBuffer",{enumerable:!0,get:function(){return f.createBuffer}}),Object.defineProperty(t,"readUInt24BE",{enumerable:!0,get:function(){return f.readUInt24BE}}),Object.defineProperty(t,"toBuffer",{enumerable:!0,get:function(){return f.toBuffer}}),Object.defineProperty(t,"writeUInt24BE",{enumerable:!0,get:function(){return f.writeUInt24BE}}),Object.defineProperty(t,"BufferEncoders",{enumerable:!0,get:function(){return S.BufferEncoders}}),Object.defineProperty(t,"BufferEncoder",{enumerable:!0,get:function(){return S.BufferEncoder}}),Object.defineProperty(t,"Utf8Encoders",{enumerable:!0,get:function(){return S.Utf8Encoders}}),Object.defineProperty(t,"UTF8Encoder",{enumerable:!0,get:function(){return S.UTF8Encoder}}),Object.defineProperty(t,"IdentitySerializer",{enumerable:!0,get:function(){return A.IdentitySerializer}}),Object.defineProperty(t,"IdentitySerializers",{enumerable:!0,get:function(){return A.IdentitySerializers}}),Object.defineProperty(t,"JsonSerializer",{enumerable:!0,get:function(){return A.JsonSerializer}}),Object.defineProperty(t,"JsonSerializers",{enumerable:!0,get:function(){return A.JsonSerializers}}),Object.defineProperty(t,"Leases",{enumerable:!0,get:function(){return m.Leases}}),Object.defineProperty(t,"Lease",{enumerable:!0,get:function(){return m.Lease}}),Object.defineProperty(t,"CompositeMetadata",{enumerable:!0,get:function(){return T.CompositeMetadata}}),Object.defineProperty(t,"ReservedMimeTypeEntry",{enumerable:!0,get:function(){return T.ReservedMimeTypeEntry}}),Object.defineProperty(t,"WellKnownMimeTypeEntry",{enumerable:!0,get:function(){return T.WellKnownMimeTypeEntry}}),Object.defineProperty(t,"ExplicitMimeTimeEntry",{enumerable:!0,get:function(){return T.ExplicitMimeTimeEntry}}),Object.defineProperty(t,"encodeAndAddCustomMetadata",{enumerable:!0,get:function(){return T.encodeAndAddCustomMetadata}}),Object.defineProperty(t,"encodeAndAddWellKnownMetadata",{enumerable:!0,get:function(){return T.encodeAndAddWellKnownMetadata}}),Object.defineProperty(t,"encodeCompositeMetadata",{enumerable:!0,get:function(){return T.encodeCompositeMetadata}}),Object.defineProperty(t,"decodeCompositeMetadata",{enumerable:!0,get:function(){return T.decodeCompositeMetadata}}),Object.defineProperty(t,"RoutingMetadata",{enumerable:!0,get:function(){return h.RoutingMetadata}}),Object.defineProperty(t,"encodeRoute",{enumerable:!0,get:function(){return h.encodeRoute}}),Object.defineProperty(t,"encodeRoutes",{enumerable:!0,get:function(){return h.encodeRoutes}}),Object.defineProperty(t,"decodeRoutes",{enumerable:!0,get:function(){return h.decodeRoutes}}),Object.defineProperty(t,"encodeSimpleAuthMetadata",{enumerable:!0,get:function(){return R.encodeSimpleAuthMetadata}}),Object.defineProperty(t,"encodeBearerAuthMetadata",{enumerable:!0,get:function(){return R.encodeBearerAuthMetadata}}),Object.defineProperty(t,"encodeWellKnownAuthMetadata",{enumerable:!0,get:function(){return R.encodeWellKnownAuthMetadata}}),Object.defineProperty(t,"encodeCustomAuthMetadata",{enumerable:!0,get:function(){return R.encodeCustomAuthMetadata}}),Object.defineProperty(t,"decodeSimpleAuthPayload",{enumerable:!0,get:function(){return R.decodeSimpleAuthPayload}}),Object.defineProperty(t,"decodeAuthMetadata",{enumerable:!0,get:function(){return R.decodeAuthMetadata}});var r=M(n(845)),o=M(n(856)),c=M(n(857)),E=O(n(456)),l=O(n(457)),_=n(137),d=n(454),f=n(174),S=n(455),A=n(238),m=n(239),T=n(860),h=n(861),R=n(862);function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=P();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var desc=r?Object.getOwnPropertyDescriptor(e,o):null;desc&&(desc.get||desc.set)?Object.defineProperty(n,o,desc):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function M(e){return e&&e.__esModule?e:{default:e}}}}]);
//# sourceMappingURL=m0v51r1f.5b069ce0.js.map